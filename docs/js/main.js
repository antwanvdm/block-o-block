!function(e){var t={};function s(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=1)}([function(e){e.exports={game:{levelsPerGame:10,startElementsPerLevel:5,elementsIncreasePerLevel:5,scorePerElement:10,secondsPerLevel:10,blockSpeed:{min:1,max:5},blockPixels:{min:10,max:150},player:{growthFactor:1.5,speed:3,speedIncreaseFactor:.2}},functionalities:{dataService:!0},dataService:{baseUrl:"https://api.mlab.com/api/1",apiKey:"X17utv1FH2dFTeUo4yhNGL54sA7CY2jS",databaseName:"typescript_scores",collectionName:"scores"}}},function(e,t,s){"use strict";s.r(t);var i=s(0);class r{constructor(e,t,s,i=""){this.x=t,this.y=s,this.el=document.createElement("div");let r=document.getElementById("main");if(null===r)throw new Error("<main> element doesn't exist!");if(this.x>-1&&this.y>-1&&(this.el.style.transform=`translate(${this.x}px, ${this.y}px)`),this.el.classList.add(`game-${e}`),""===i)r.appendChild(this.el);else{let e=document.querySelector(`.game-${i}`);if(null===e)throw new Error(`<.game-${i}> element doesn't exist!`);e.appendChild(this.el)}}getClientReact(){return this.el.getBoundingClientRect()}}class a extends r{constructor(){super("score",-1,-1,"gui"),this.score=0,this.renderTemplate(),this.el.querySelector(".score-count").innerHTML=this.score.toString(),this.el.classList.add("message","is-warning")}get(){return this.score}update(e,t=!1){this.score=t?e:this.score+e,this.el.querySelector(".score-count").innerHTML=this.score.toString()}renderTemplate(){this.el.innerHTML='\n            <div class="message-body">\n                <span>score: </span>\n                <span class="score-count"></span>\n            </div>\n        '}}class n{static addEventListener(e,t){n.functionMap[e]=t,window.addEventListener(e.split(".")[0],n.functionMap[e])}static removeEventListener(e){window.removeEventListener(e.split(".")[0],n.functionMap[e]),delete n.functionMap[e]}}n.functionMap={};class o extends r{constructor(){super("messagescreen",-1,-1,"gui"),this.isActive=!1,this.messages={"game:start":{header:"Welcome to Block-o-Block!",body:"It's time to catch them blocks!<br/><br/>Use your arrow keys to move your player around and press space to start.<br/><br/>Press -<strong>H</strong>- to view the highscore list",className:"is-info"},"game:end":{header:"Your game is over!",body:"You made it, your final score is __SCORE__ out of max __MAX_SCORE__ points.<br/><br/>Thanks for playing, press space to restart the madness.<br/><br/>Press -<strong>H</strong>- to view the highscore list",className:"is-success"},"level:success":{header:"YEAH! Level completed!",body:"Performing like a boss! Press space to proceed to the next level and catch even more blocks",className:"is-success"},"level:failed":{header:"AAH! Level failed!",body:"Try again and show us what you're made off! Press space to restart this level",className:"is-danger"}},this.el.classList.add("message"),this.renderTemplate(),this.show("game:start"),n.addEventListener("keyup.messagescreen",e=>this.keyBoardHandler(e))}keyBoardHandler(e){" "===e.key&&!0===this.isActive&&window.dispatchEvent(new Event(`${this.currentEvent}:click`))}show(e,t={}){let s=this.messages[e].header,i=this.messages[e].body;for(let e in t)i=i.replace(e,t[e]);this.el.querySelector(".message-header").innerHTML=s,this.el.querySelector(".message-body").innerHTML=i,this.el.classList.add("show",this.messages[e].className),this.currentEvent=e,this.isActive=!0}hide(){this.el.classList.remove("show","is-info","is-success","is-danger"),this.isActive=!1}renderTemplate(){this.el.innerHTML='\n            <div class="message-header"></div>\n            <div class="message-body"></div>\n        '}}class h{constructor(){this.endPointList=`/databases/${i.dataService.databaseName}/collections/${i.dataService.collectionName}?apiKey=${i.dataService.apiKey}`,this.endPointSave=`/databases/${i.dataService.databaseName}/collections/${i.dataService.collectionName}?apiKey=${i.dataService.apiKey}`,this.disabledMessage="Dataservice is disabled"}saveScore(e){if(!1===i.functionalities.dataService)return this.disabled();let t=`${i.dataService.baseUrl}${this.endPointSave}`;return fetch(t,{body:JSON.stringify({score:e}),headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then(e=>e.json())}getScores(){if(!1===i.functionalities.dataService)return this.disabled();let e=`${i.dataService.baseUrl}${this.endPointList}&s={"score": -1}&l=10`;return fetch(e,{mode:"cors"}).then(e=>e.json())}disabled(){return new Promise(e=>{e({error:this.disabledMessage})})}}class l extends r{constructor(){super("highscorelist",-1,-1,"gui"),this.el.classList.add("message","is-warning"),this.renderTemplate(),this.dataService=new h}show(){this.dataService.getScores().then(e=>{this.el.querySelector(".tbody").innerHTML=this.getTbodyTemplate(e),this.el.classList.add("show")})}hide(){this.el.classList.remove("show")}getTbodyTemplate(e){return`\n            ${e.map((e,t)=>`<tr>\n                <td>${t+1}</td>\n                <td>${e._id.$oid}</td>\n                <td>${e.score.toString()}</td>\n            </tr>`).join("")}\n        `}renderTemplate(){this.el.innerHTML='\n            <div class="message-header">\n                <p>Top 10 High Scores (press -<strong>esc</strong>- to return)</p>\n            </div>\n            <div class="message-body">\n                <table class="table">\n                    <thead>\n                    <tr>\n                        <th>#</th>\n                        <th>MongoID</th>\n                        <th>Score</th>\n                    </tr>\n                    </thead>\n                    <tbody class="tbody"></tbody>\n                </table>\n            </div>\n        '}}class d extends r{constructor(){super("gui",-1,-1),this.highScoreListVisible=!1,this.score=new a,this.messageScreen=new o,window.addEventListener("level:scoreUpdate",e=>this.score.update(e.detail.score)),!0===i.functionalities.dataService&&(this.highScoreList=new l,n.addEventListener("keyup.highscorelist",e=>this.keyBoardHandler(e)))}keyBoardHandler(e){let t=e.key.toLowerCase();"h"===t&&!1===this.highScoreListVisible?(this.highScoreListVisible=!0,this.highScoreList.show()):"escape"===t&&!0===this.highScoreListVisible&&(this.highScoreListVisible=!1,this.highScoreList.hide())}levelDone(e){this.messageScreen.show(e)}newLevel(){this.messageScreen.hide()}gameEnd(e){this.messageScreen.show("game:end",{__SCORE__:this.score.get().toString(),__MAX_SCORE__:e.toString()})}restart(){this.messageScreen.hide(),this.messageScreen.show("game:start"),this.score.update(0,!0)}getScore(){return this.score.get()}}class c{static getRandomColor(){let e=Math.round,t=Math.random;return`rgba(${e(255*t())},${e(255*t())},${e(255*t())},1)`}static getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}static checkCollision(e,t){return e.left<=t.right&&t.left<=e.right&&e.top<=t.bottom&&t.top<=e.bottom}}class m extends r{constructor(e,t,s,i){super("block",0,0,"level"),this.destination={x:0,y:0},this.speed=t,this.width=s,this.height=i,this.color=e,this.el.style.backgroundImage=`repeating-linear-gradient(${c.getRandomInt(0,360)}deg, #000000, #000000 ${c.getRandomInt(2,10)}px, ${this.color} 10px, ${this.color} ${c.getRandomInt(20,40)}px)`,this.el.style.width=`${this.width}px`,this.el.style.height=`${this.height}px`,this.x=c.getRandomInt(0,window.outerWidth-this.width),this.y=c.getRandomInt(0,document.documentElement.clientHeight-this.height),this.el.style.transform=`translate(${this.x}px, ${this.y}px)`}destroy(){this.el.remove()}update(){this.x>this.destination.x-this.speed&&this.x<this.destination.x+this.speed&&(this.destination.x=c.getRandomInt(0,window.outerWidth-this.width)),this.y>this.destination.y-this.speed&&this.y<this.destination.y+this.speed&&(this.destination.y=c.getRandomInt(0,document.documentElement.clientHeight-this.height)),this.destination.x>=this.x?this.x+=this.speed:this.x-=this.speed,this.destination.y>=this.y?this.y+=this.speed:this.y-=this.speed,this.el.style.transform=`translate(${this.x}px, ${this.y}px)`}}class p extends r{constructor(){super("player",0,0,"level"),this.height=10,this.width=10,this.growthFactor=i.game.player.growthFactor,this.speed=i.game.player.speed,this.speedIncreaseFactor=i.game.player.speedIncreaseFactor,this.keysAllowed=["arrowleft","arrowup","arrowright","arrowdown"],this.keysPressed=[],this.x=window.outerWidth/2-this.width/2,this.y=document.documentElement.clientHeight/2-this.height/2,this.el.style.width=`${this.width}px`,this.el.style.height=`${this.height}px`,this.el.style.borderRadius=`${this.width}px`,n.addEventListener("keydown.player",e=>this.keyDownHandler(e)),n.addEventListener("keyup.player",e=>this.keyUpHandler(e))}keyDownHandler(e){let t=e.key.toLowerCase();this.keysAllowed.indexOf(t)>-1&&-1===this.keysPressed.indexOf(t)&&this.keysPressed.push(t)}keyUpHandler(e){let t=e.key.toLowerCase(),s=this.keysPressed.indexOf(t);this.keysAllowed.indexOf(t)>-1&&s>-1&&this.keysPressed.splice(s,1)}update(){this.keysPressed.forEach(e=>{switch(e){case"arrowleft":this.x-=this.speed;break;case"arrowup":this.y-=this.speed;break;case"arrowright":this.x+=this.speed;break;case"arrowdown":this.y+=this.speed;break;default:return}}),this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x>window.outerWidth-this.width&&(this.x=window.outerWidth-this.width),this.y>document.documentElement.clientHeight-this.height&&(this.y=document.documentElement.clientHeight-this.height),this.el.style.transform=`translate(${this.x}px, ${this.y}px)`}blockCaught(e){this.speed+=this.speedIncreaseFactor,this.width+=this.growthFactor,this.height+=this.growthFactor,this.el.style.height=`${this.height}px`,this.el.style.width=`${this.width}px`,this.el.style.borderRadius=`${this.width}px`,this.el.style.backgroundColor=e.color}destroy(){this.el.remove(),n.removeEventListener("keydown.player"),n.removeEventListener("keyup.player")}}class g extends r{constructor(){super("timer",-1,-1,"level"),this.seconds=i.game.secondsPerLevel,this.renderTemplate(),this.el.classList.add("message","is-primary"),this.el.querySelector(".seconds").innerHTML=this.seconds.toString(),this.intervalId=setInterval(()=>this.update(),1e3)}update(){this.seconds--,this.el.querySelector(".seconds").innerHTML=this.seconds.toString(),this.seconds<=3?(this.el.classList.remove("is-primary"),this.el.classList.add("is-danger")):(this.el.classList.add("is-primary"),this.el.classList.remove("is-danger")),0===this.seconds&&window.dispatchEvent(new Event("timer:done"))}destroy(){clearInterval(this.intervalId)}renderTemplate(){this.el.innerHTML='\n            <div class="message-body">\n                <span>time: </span>\n                <span class="seconds"></span>\n            </div>\n        '}}class u extends r{constructor(e,t){super("level",0,0),this.blocks=[],this.failed=!1,this.totalBlocks=e,this.scorePerBlock=t,this.player=new p,this.timer=new g;for(let e=0;e<this.totalBlocks;e++)this.blocks.push(new m(c.getRandomColor(),c.getRandomInt(i.game.blockSpeed.min,i.game.blockSpeed.max),c.getRandomInt(i.game.blockPixels.min,i.game.blockPixels.max),c.getRandomInt(i.game.blockPixels.min,i.game.blockPixels.max)));n.addEventListener("timer:done",()=>{this.failed=!0,this.destroy("level:failed")})}update(){this.player.update(),this.blocks.forEach((e,t)=>{e.update(),c.checkCollision(this.player.getClientReact(),e.getClientReact())&&!1===this.failed&&(this.player.blockCaught(e),e.destroy(),this.blocks.splice(t,1),window.dispatchEvent(new CustomEvent("level:scoreUpdate",{detail:{score:this.scorePerBlock}})),0===this.blocks.length&&this.destroy("level:success"))})}destroy(e){this.timer.destroy(),this.player.destroy(),this.blocks.forEach((e,t)=>{e.destroy(),this.blocks.splice(t,1)}),n.removeEventListener("timer:done"),window.dispatchEvent(new Event(e)),this.el.remove()}}window.addEventListener("load",()=>new class{constructor(){this.levelsPerGame=i.game.levelsPerGame,this.currentLevelsPlayed=0,this.startElementsPerLevel=i.game.startElementsPerLevel,this.elementsIncreasePerLevel=i.game.elementsIncreasePerLevel,this.scorePerElement=i.game.scorePerElement,this.gui=new d,this.maxScore=this.calculateMaxScore(),this.gameLoop(),this.dataService=new h,["level:success","level:failed"].map(e=>{window.addEventListener(e,e=>this.update(e.type))}),["game:start:click","level:success:click","level:failed:click"].map(e=>{window.addEventListener(e,()=>this.startNewLevel())}),window.addEventListener("game:end:click",()=>this.restart())}calculateMaxScore(){let e=0;for(let t=0;t<this.levelsPerGame;t++)e+=(this.startElementsPerLevel+(0===t?0:this.elementsIncreasePerLevel*t))*this.scorePerElement;return e}gameLoop(){void 0!==this.level&&this.level.update(),requestAnimationFrame(()=>this.gameLoop())}update(e){if(this.currentLevelsPlayed++,this.currentLevelsPlayed===this.levelsPerGame)return this.gui.gameEnd(this.maxScore),void this.saveScore();this.gui.levelDone(e)}startNewLevel(){this.level&&!1===this.level.failed&&(this.startElementsPerLevel+=this.elementsIncreasePerLevel),delete this.level,this.gui.newLevel(),this.level=new u(this.startElementsPerLevel,this.scorePerElement)}restart(){this.gui.restart(),this.currentLevelsPlayed=0,this.startElementsPerLevel=i.game.startElementsPerLevel}saveScore(){let e=this.gui.getScore();this.dataService.saveScore(e).then(e=>{console.log("Response after saving score",e)})}})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZGV2L2hlbHBlcnMvZG9tZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9kZXYvZ3VpL3Njb3JlLnRzIiwid2VicGFjazovLy8uL2Rldi9oZWxwZXJzL3dpbmRvd2V2ZW50aGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9kZXYvZ3VpL21lc3NhZ2VzY3JlZW4udHMiLCJ3ZWJwYWNrOi8vLy4vZGV2L2RhdGFzZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL2Rldi9ndWkvaGlnaHNjb3JlbGlzdC50cyIsIndlYnBhY2s6Ly8vLi9kZXYvZ3VpL2d1aS50cyIsIndlYnBhY2s6Ly8vLi9kZXYvaGVscGVycy91dGlscy50cyIsIndlYnBhY2s6Ly8vLi9kZXYvbGV2ZWwvYmxvY2sudHMiLCJ3ZWJwYWNrOi8vLy4vZGV2L2xldmVsL3BsYXllci50cyIsIndlYnBhY2s6Ly8vLi9kZXYvbGV2ZWwvdGltZXIudHMiLCJ3ZWJwYWNrOi8vLy4vZGV2L2xldmVsL2xldmVsLnRzIiwid2VicGFjazovLy8uL2Rldi9tYWluLnRzIiwid2VicGFjazovLy8uL2Rldi9nYW1lLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJEb21FbGVtZW50IiwiW29iamVjdCBPYmplY3RdIiwidHlwZSIsIngiLCJ5IiwicGFyZW50Q2xhc3MiLCJ0aGlzIiwiZWwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJtYWluIiwiZ2V0RWxlbWVudEJ5SWQiLCJFcnJvciIsInN0eWxlIiwidHJhbnNmb3JtIiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJwYXJlbnRFbCIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJzY29yZV9TY29yZSIsInN1cGVyIiwic2NvcmUiLCJyZW5kZXJUZW1wbGF0ZSIsImlubmVySFRNTCIsInRvU3RyaW5nIiwicmVzZXQiLCJXaW5kb3dFdmVudEhhbmRsZXIiLCJldmVudCIsImZ1bmMiLCJmdW5jdGlvbk1hcCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzcGxpdCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJtZXNzYWdlc2NyZWVuX01lc3NhZ2VTY3JlZW4iLCJpc0FjdGl2ZSIsIm1lc3NhZ2VzIiwiZ2FtZTpzdGFydCIsImhlYWRlciIsImJvZHkiLCJjbGFzc05hbWUiLCJnYW1lOmVuZCIsImxldmVsOnN1Y2Nlc3MiLCJsZXZlbDpmYWlsZWQiLCJzaG93IiwiZSIsImtleUJvYXJkSGFuZGxlciIsImtleSIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsImN1cnJlbnRFdmVudCIsImJvZHlSZXBsYWNlbWVudHMiLCJtZXNzYWdlSGVhZGVyIiwibWVzc2FnZUJvZHkiLCJyZXBsYWNlbWVudCIsInJlcGxhY2UiLCJyZW1vdmUiLCJkYXRhc2VydmljZV9EYXRhU2VydmljZSIsImVuZFBvaW50TGlzdCIsImNvbmZpZyIsImRhdGFTZXJ2aWNlIiwiZGF0YWJhc2VOYW1lIiwiY29sbGVjdGlvbk5hbWUiLCJhcGlLZXkiLCJlbmRQb2ludFNhdmUiLCJkaXNhYmxlZE1lc3NhZ2UiLCJmdW5jdGlvbmFsaXRpZXMiLCJkaXNhYmxlZCIsInVybCIsImJhc2VVcmwiLCJmZXRjaCIsIkpTT04iLCJzdHJpbmdpZnkiLCJoZWFkZXJzIiwiY29udGVudC10eXBlIiwibWV0aG9kIiwibW9kZSIsInRoZW4iLCJyZXNwb25zZSIsImpzb24iLCJQcm9taXNlIiwicmVzb2x2ZSIsImVycm9yIiwiaGlnaHNjb3JlbGlzdF9IaWdoU2NvcmVMaXN0IiwiZ2V0U2NvcmVzIiwiZGF0YSIsImdldFRib2R5VGVtcGxhdGUiLCJtYXAiLCJpdGVtIiwiaW5kZXgiLCJfaWQiLCIkb2lkIiwiam9pbiIsImd1aV9HVUkiLCJoaWdoU2NvcmVMaXN0VmlzaWJsZSIsIm1lc3NhZ2VTY3JlZW4iLCJ1cGRhdGUiLCJkZXRhaWwiLCJoaWdoU2NvcmVMaXN0IiwidG9Mb3dlckNhc2UiLCJoaWRlIiwibWF4U2NvcmUiLCJfX1NDT1JFX18iLCJfX01BWF9TQ09SRV9fIiwiVXRpbHMiLCJNYXRoIiwicm91bmQiLCJyYW5kb20iLCJtaW4iLCJtYXgiLCJmbG9vciIsImEiLCJiIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwiYmxvY2tfQmxvY2siLCJjb2xvciIsInNwZWVkIiwid2lkdGgiLCJoZWlnaHQiLCJkZXN0aW5hdGlvbiIsImJhY2tncm91bmRJbWFnZSIsImdldFJhbmRvbUludCIsIm91dGVyV2lkdGgiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRIZWlnaHQiLCJwbGF5ZXJfUGxheWVyIiwiZ3Jvd3RoRmFjdG9yIiwiZ2FtZSIsInBsYXllciIsInNwZWVkSW5jcmVhc2VGYWN0b3IiLCJrZXlzQWxsb3dlZCIsImtleXNQcmVzc2VkIiwiYm9yZGVyUmFkaXVzIiwia2V5RG93bkhhbmRsZXIiLCJrZXlVcEhhbmRsZXIiLCJpbmRleE9mIiwicHVzaCIsImtleVByZXNzZWRQb3NpdGlvbiIsInNwbGljZSIsImZvckVhY2giLCJibG9jayIsImJhY2tncm91bmRDb2xvciIsInRpbWVyX1RpbWVyIiwic2Vjb25kcyIsInNlY29uZHNQZXJMZXZlbCIsImludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJsZXZlbF9MZXZlbCIsInRvdGFsQmxvY2tzIiwic2NvcmVQZXJCbG9jayIsImJsb2NrcyIsImZhaWxlZCIsInRpbWVyIiwiZ2V0UmFuZG9tQ29sb3IiLCJibG9ja1NwZWVkIiwiYmxvY2tQaXhlbHMiLCJkZXN0cm95IiwiY2hlY2tDb2xsaXNpb24iLCJnZXRDbGllbnRSZWFjdCIsImJsb2NrQ2F1Z2h0IiwiQ3VzdG9tRXZlbnQiLCJsZW5ndGgiLCJldmVudFR5cGUiLCJsZXZlbHNQZXJHYW1lIiwiY3VycmVudExldmVsc1BsYXllZCIsInN0YXJ0RWxlbWVudHNQZXJMZXZlbCIsImVsZW1lbnRzSW5jcmVhc2VQZXJMZXZlbCIsInNjb3JlUGVyRWxlbWVudCIsImd1aSIsImNhbGN1bGF0ZU1heFNjb3JlIiwiZ2FtZUxvb3AiLCJzdGFydE5ld0xldmVsIiwicmVzdGFydCIsImxldmVsIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZ2FtZUVuZCIsInNhdmVTY29yZSIsImxldmVsRG9uZSIsIm5ld0xldmVsIiwiZ2V0U2NvcmUiLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFqQixHQUNBWSxPQUFBQyxlQUFBYixFQUFBLGNBQWlEa0IsT0FBQSxLQUlqRHBCLEVBQUFxQixFQUFBLFNBQUFsQixHQUNBLElBQUFTLEVBQUFULEtBQUFtQixXQUNBLFdBQTJCLE9BQUFuQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBVSxFQUFBQyxHQUFzRCxPQUFBVixPQUFBVyxVQUFBQyxlQUFBbkIsS0FBQWdCLEVBQUFDLElBR3REeEIsRUFBQTJCLEVBQUEsR0FJQTNCLElBQUE0QixFQUFBLDBlQ25FY0MsRUFLVkMsWUFBWUMsRUFBY0MsRUFBV0MsRUFBV0MsRUFBc0IsSUFDbEVDLEtBQUtILEVBQUlBLEVBQ1RHLEtBQUtGLEVBQUlBLEVBRVRFLEtBQUtDLEdBQUtDLFNBQVNDLGNBQWMsT0FDakMsSUFBSUMsRUFBT0YsU0FBU0csZUFBZSxRQUNuQyxHQUFhLE9BQVRELEVBQ0EsTUFBTSxJQUFJRSxNQUFNLGlDQVNwQixHQUxJTixLQUFLSCxHQUFLLEdBQUtHLEtBQUtGLEdBQUssSUFDekJFLEtBQUtDLEdBQUdNLE1BQU1DLHVCQUF5QlIsS0FBS0gsUUFBUUcsS0FBS0YsUUFFN0RFLEtBQUtDLEdBQUdRLFVBQVVDLFlBQVlkLEtBRVYsS0FBaEJHLEVBQ0FLLEVBQUtPLFlBQVlYLEtBQUtDLFFBQ25CLENBQ0gsSUFBSVcsRUFBV1YsU0FBU1csdUJBQXVCZCxLQUMvQyxHQUFpQixPQUFiYSxFQUNBLE1BQU0sSUFBSU4sZ0JBQWdCUCw2QkFFOUJhLEVBQVNELFlBQVlYLEtBQUtDLEtBTzNCTixpQkFDSCxPQUFPSyxLQUFLQyxHQUFHYSwrQkNsQ1RDLFVBQXFCckIsRUFHL0JDLGNBQ0lxQixNQUFNLFNBQVUsR0FBSSxFQUFHLE9BSG5CaEIsS0FBQWlCLE1BQWdCLEVBS3BCakIsS0FBS2tCLGlCQUNMbEIsS0FBS0MsR0FBR1ksY0FBYyxnQkFBZ0JNLFVBQVluQixLQUFLaUIsTUFBTUcsV0FDN0RwQixLQUFLQyxHQUFHUSxVQUFVQyxJQUFJLFVBQVcsY0FROUJmLE1BQ0gsT0FBT0ssS0FBS2lCLE1BU1R0QixPQUFPc0IsRUFBZUksR0FBaUIsR0FDMUNyQixLQUFLaUIsTUFBUUksRUFBUUosRUFBUWpCLEtBQUtpQixNQUFRQSxFQUMxQ2pCLEtBQUtDLEdBQUdZLGNBQWMsZ0JBQWdCTSxVQUFZbkIsS0FBS2lCLE1BQU1HLFdBTXpEekIsaUJBQ0pLLEtBQUtDLEdBQUdrQixVQUFZLHlLQ3JDZEcsRUFHSDNCLHdCQUF3QjRCLEVBQWVDLEdBQzFDRixFQUFtQkcsWUFBWUYsR0FBU0MsRUFDeENFLE9BQU9DLGlCQUFpQkosRUFBTUssTUFBTSxLQUFLLEdBQUlOLEVBQW1CRyxZQUFZRixJQUd6RTVCLDJCQUEyQjRCLEdBQzlCRyxPQUFPRyxvQkFBb0JOLEVBQU1LLE1BQU0sS0FBSyxHQUFJTixFQUFtQkcsWUFBWUYsV0FDeEVELEVBQW1CRyxZQUFZRixJQVQzQkQsRUFBQUcscUJDRUxLLFVBQTZCcEMsRUEyQnZDQyxjQUNJcUIsTUFBTSxpQkFBa0IsR0FBSSxFQUFHLE9BMUIzQmhCLEtBQUErQixVQUFvQixFQUVwQi9CLEtBQUFnQyxVQUNKQyxjQUNJQyxPQUFVLDRCQUNWQyxLQUFRLG1MQUNSQyxVQUFhLFdBRWpCQyxZQUNJSCxPQUFVLHFCQUNWQyxLQUFRLDhNQUNSQyxVQUFhLGNBRWpCRSxpQkFDSUosT0FBVSx5QkFDVkMsS0FBUSw4RkFDUkMsVUFBYSxjQUVqQkcsZ0JBQ0lMLE9BQVUscUJBQ1ZDLEtBQVEsZ0ZBQ1JDLFVBQWEsY0FNakJwQyxLQUFLQyxHQUFHUSxVQUFVQyxJQUFJLFdBRXRCVixLQUFLa0IsaUJBQ0xsQixLQUFLd0MsS0FBSyxjQUNWbEIsRUFBbUJLLGlCQUFpQixzQkFBd0JjLEdBQXFCekMsS0FBSzBDLGdCQUFnQkQsSUFRbEc5QyxnQkFBZ0I4QyxHQUNOLE1BQVZBLEVBQUVFLE1BQWlDLElBQWxCM0MsS0FBSytCLFVBQ3RCTCxPQUFPa0IsY0FBYyxJQUFJQyxTQUFTN0MsS0FBSzhDLHVCQVV4Q25ELEtBQUtDLEVBQWNtRCxNQUN0QixJQUFJQyxFQUFnQmhELEtBQUtnQyxTQUFTcEMsR0FBTXNDLE9BQ3BDZSxFQUFjakQsS0FBS2dDLFNBQVNwQyxHQUFNdUMsS0FDdEMsSUFBSyxJQUFJZSxLQUFlSCxFQUNwQkUsRUFBY0EsRUFBWUUsUUFBUUQsRUFBYUgsRUFBaUJHLElBR3BFbEQsS0FBS0MsR0FBR1ksY0FBYyxtQkFBbUJNLFVBQVk2QixFQUNyRGhELEtBQUtDLEdBQUdZLGNBQWMsaUJBQWlCTSxVQUFZOEIsRUFFbkRqRCxLQUFLQyxHQUFHUSxVQUFVQyxJQUFJLE9BQVFWLEtBQUtnQyxTQUFTcEMsR0FBTXdDLFdBQ2xEcEMsS0FBSzhDLGFBQWVsRCxFQUNwQkksS0FBSytCLFVBQVcsRUFNYnBDLE9BQ0hLLEtBQUtDLEdBQUdRLFVBQVUyQyxPQUFPLE9BQVEsVUFBVyxhQUFjLGFBQzFEcEQsS0FBSytCLFVBQVcsRUFNWnBDLGlCQUNKSyxLQUFLQyxHQUFHa0IsVUFBWSxrSENqRmRrQyxFQUFkMUQsY0FDWUssS0FBQXNELDJCQUFxQ0MsRUFBT0MsWUFBWUMsNEJBQTRCRixFQUFPQyxZQUFZRSx5QkFBeUJILEVBQU9DLFlBQVlHLFNBQ25KM0QsS0FBQTRELDJCQUFxQ0wsRUFBT0MsWUFBWUMsNEJBQTRCRixFQUFPQyxZQUFZRSx5QkFBeUJILEVBQU9DLFlBQVlHLFNBQ25KM0QsS0FBQTZELGdCQUF5QiwwQkFRMUJsRSxVQUFVc0IsR0FDYixJQUEyQyxJQUF2Q3NDLEVBQU9PLGdCQUFnQk4sWUFDdkIsT0FBT3hELEtBQUsrRCxXQUdoQixJQUFJQyxLQUFTVCxFQUFPQyxZQUFZUyxVQUFVakUsS0FBSzRELGVBQy9DLE9BQU9NLE1BQU1GLEdBQ1Q3QixLQUFNZ0MsS0FBS0MsV0FDUG5ELE1BQU9BLElBRVhvRCxTQUNJQyxlQUFnQixvQkFFcEJDLE9BQVEsT0FDUkMsS0FBTSxTQUNQQyxLQUFLQyxHQUFZQSxFQUFTQyxRQVExQmhGLFlBQ0gsSUFBMkMsSUFBdkM0RCxFQUFPTyxnQkFBZ0JOLFlBQ3ZCLE9BQU94RCxLQUFLK0QsV0FHaEIsSUFBSUMsS0FBU1QsRUFBT0MsWUFBWVMsVUFBVWpFLEtBQUtzRCxvQ0FDL0MsT0FBT1ksTUFBTUYsR0FDVFEsS0FBTSxTQUNQQyxLQUFLQyxHQUFZQSxFQUFTQyxRQVF6QmhGLFdBQ0osT0FBTyxJQUFJaUYsUUFBU0MsSUFDaEJBLEdBQVNDLE1BQVM5RSxLQUFLNkQsMkJDbkRyQmtCLFVBQTZCckYsRUFHdkNDLGNBQ0lxQixNQUFNLGlCQUFrQixHQUFJLEVBQUcsT0FDL0JoQixLQUFLQyxHQUFHUSxVQUFVQyxJQUFJLFVBQVcsY0FFakNWLEtBQUtrQixpQkFDTGxCLEtBQUt3RCxZQUFjLElBQUlILEVBTXBCMUQsT0FDSEssS0FBS3dELFlBQVl3QixZQUFZUCxLQUFNUSxJQUNuQmpGLEtBQUtDLEdBQUdZLGNBQWMsVUFDNUJNLFVBQVluQixLQUFLa0YsaUJBQWlCRCxHQUN4Q2pGLEtBQUtDLEdBQUdRLFVBQVVDLElBQUksVUFPdkJmLE9BQ0hLLEtBQUtDLEdBQUdRLFVBQVUyQyxPQUFPLFFBU3JCekQsaUJBQWlCc0YsR0FDckIsdUJBQ01BLEVBQUtFLElBQUksQ0FBQ0MsRUFBTUMsaUNBQ1JBLEVBQVEsK0JBQ1JELEVBQUtFLElBQUlDLGtDQUNUSCxFQUFLbkUsTUFBTUcsc0NBQ2JvRSxLQUFLLGdCQU9iN0YsaUJBQ0pLLEtBQUtDLEdBQUdrQixVQUFZLDRqQkM3Q2RzRSxVQUFtQi9GLEVBTTdCQyxjQUNJcUIsTUFBTSxPQUFRLEdBQUksR0FIZGhCLEtBQUEwRixzQkFBZ0MsRUFLcEMxRixLQUFLaUIsTUFBUSxJQUFJRixFQUNqQmYsS0FBSzJGLGNBQWdCLElBQUk3RCxFQUN6QkosT0FBT0MsaUJBQWlCLG9CQUFzQmMsR0FBTXpDLEtBQUtpQixNQUFNMkUsT0FBUW5ELEVBQWtCb0QsT0FBTzVFLFNBRXJELElBQXZDc0MsRUFBT08sZ0JBQWdCTixjQUN2QnhELEtBQUs4RixjQUFnQixJQUFJZixFQUN6QnpELEVBQW1CSyxpQkFBaUIsc0JBQXdCYyxHQUFxQnpDLEtBQUswQyxnQkFBZ0JELEtBUzlHOUMsZ0JBQWdCOEMsR0FDWixJQUFJRSxFQUFNRixFQUFFRSxJQUFJb0QsY0FDSixNQUFScEQsSUFBNkMsSUFBOUIzQyxLQUFLMEYsc0JBQ3BCMUYsS0FBSzBGLHNCQUF1QixFQUM1QjFGLEtBQUs4RixjQUFjdEQsUUFDSixXQUFSRyxJQUFrRCxJQUE5QjNDLEtBQUswRix1QkFDaEMxRixLQUFLMEYsc0JBQXVCLEVBQzVCMUYsS0FBSzhGLGNBQWNFLFFBU3BCckcsVUFBVUMsR0FDYkksS0FBSzJGLGNBQWNuRCxLQUFLNUMsR0FNckJELFdBQ0hLLEtBQUsyRixjQUFjSyxPQVFoQnJHLFFBQVFzRyxHQUNYakcsS0FBSzJGLGNBQWNuRCxLQUFLLFlBQ3BCMEQsVUFBYWxHLEtBQUtpQixNQUFNbEMsTUFBTXFDLFdBQzlCK0UsY0FBaUJGLEVBQVM3RSxhQU8zQnpCLFVBQ0hLLEtBQUsyRixjQUFjSyxPQUNuQmhHLEtBQUsyRixjQUFjbkQsS0FBSyxjQUN4QnhDLEtBQUtpQixNQUFNMkUsT0FBTyxHQUFHLEdBTWxCakcsV0FDSCxPQUFPSyxLQUFLaUIsTUFBTWxDLGFDbkZacUgsRUFDVnpHLHdCQUNJLElBQUlqQixFQUFJMkgsS0FBS0MsTUFBT3RILEVBQUlxSCxLQUFLRSxPQUM3QixjQUFlN0gsRUFEMEIsSUFDeEJNLFFBQVlOLEVBRFksSUFDVk0sUUFBWU4sRUFERixJQUNJTSxVQUdqRFcsb0JBQW9CNkcsRUFBYUMsR0FDN0IsT0FBT0osS0FBS0ssTUFBTUwsS0FBS0UsVUFBWUUsRUFBTUQsRUFBTSxJQUFNQSxFQUd6RDdHLHNCQUFzQmdILEVBQWVDLEdBQ2pDLE9BQVFELEVBQUVFLE1BQVFELEVBQUVFLE9BQ2hCRixFQUFFQyxNQUFRRixFQUFFRyxPQUNaSCxFQUFFSSxLQUFPSCxFQUFFSSxRQUNYSixFQUFFRyxLQUFPSixFQUFFSyxjQ1hUQyxVQUFxQnZILEVBTy9CQyxZQUFZdUgsRUFBZUMsRUFBZUMsRUFBZUMsR0FDckRyRyxNQUFNLFFBQVMsRUFBRyxFQUFHLFNBSGpCaEIsS0FBQXNILGFBQWV6SCxFQUFHLEVBQUdDLEVBQUcsR0FLNUJFLEtBQUttSCxNQUFRQSxFQUNibkgsS0FBS29ILE1BQVFBLEVBQ2JwSCxLQUFLcUgsT0FBU0EsRUFDZHJILEtBQUtrSCxNQUFRQSxFQUVibEgsS0FBS0MsR0FBR00sTUFBTWdILDZDQUErQ25CLEVBQU1vQixhQUFhLEVBQUUsNkJBQTZCcEIsRUFBTW9CLGFBQWEsRUFBRSxVQUFVeEgsS0FBS2tILGVBQWVsSCxLQUFLa0gsU0FBU2QsRUFBTW9CLGFBQWEsR0FBRyxTQUN0TXhILEtBQUtDLEdBQUdNLE1BQU02RyxTQUFXcEgsS0FBS29ILFVBQzlCcEgsS0FBS0MsR0FBR00sTUFBTThHLFVBQVlySCxLQUFLcUgsV0FFL0JySCxLQUFLSCxFQUFJdUcsRUFBTW9CLGFBQWEsRUFBSTlGLE9BQU8rRixXQUFhekgsS0FBS29ILE9BQ3pEcEgsS0FBS0YsRUFBSXNHLEVBQU1vQixhQUFhLEVBQUl0SCxTQUFTd0gsZ0JBQWdCQyxhQUFlM0gsS0FBS3FILFFBQzdFckgsS0FBS0MsR0FBR00sTUFBTUMsdUJBQXlCUixLQUFLSCxRQUFRRyxLQUFLRixPQU10REgsVUFDSEssS0FBS0MsR0FBR21ELFNBTUx6RCxTQUNDSyxLQUFLSCxFQUFLRyxLQUFLc0gsWUFBWXpILEVBQUlHLEtBQUttSCxPQUFVbkgsS0FBS0gsRUFBS0csS0FBS3NILFlBQVl6SCxFQUFJRyxLQUFLbUgsUUFDbEZuSCxLQUFLc0gsWUFBWXpILEVBQUl1RyxFQUFNb0IsYUFBYSxFQUFJOUYsT0FBTytGLFdBQWF6SCxLQUFLb0gsUUFFckVwSCxLQUFLRixFQUFLRSxLQUFLc0gsWUFBWXhILEVBQUlFLEtBQUttSCxPQUFVbkgsS0FBS0YsRUFBS0UsS0FBS3NILFlBQVl4SCxFQUFJRSxLQUFLbUgsUUFDbEZuSCxLQUFLc0gsWUFBWXhILEVBQUlzRyxFQUFNb0IsYUFBYSxFQUFJdEgsU0FBU3dILGdCQUFnQkMsYUFBZTNILEtBQUtxSCxTQUd6RnJILEtBQUtzSCxZQUFZekgsR0FBS0csS0FBS0gsRUFDM0JHLEtBQUtILEdBQUtHLEtBQUttSCxNQUVmbkgsS0FBS0gsR0FBS0csS0FBS21ILE1BR2ZuSCxLQUFLc0gsWUFBWXhILEdBQUtFLEtBQUtGLEVBQzNCRSxLQUFLRixHQUFLRSxLQUFLbUgsTUFFZm5ILEtBQUtGLEdBQUtFLEtBQUttSCxNQUduQm5ILEtBQUtDLEdBQUdNLE1BQU1DLHVCQUF5QlIsS0FBS0gsUUFBUUcsS0FBS0YsY0NwRG5EOEgsVUFBc0JsSSxFQVNoQ0MsY0FDSXFCLE1BQU0sU0FBVSxFQUFHLEVBQUcsU0FUbEJoQixLQUFBcUgsT0FBaUIsR0FDakJySCxLQUFBb0gsTUFBZ0IsR0FDaEJwSCxLQUFBNkgsYUFBdUJ0RSxFQUFPdUUsS0FBS0MsT0FBT0YsYUFDMUM3SCxLQUFBbUgsTUFBZ0I1RCxFQUFPdUUsS0FBS0MsT0FBT1osTUFDbkNuSCxLQUFBZ0ksb0JBQThCekUsRUFBT3VFLEtBQUtDLE9BQU9DLG9CQUNqRGhJLEtBQUFpSSxhQUF5QixZQUFhLFVBQVcsYUFBYyxhQUMvRGpJLEtBQUFrSSxlQUlKbEksS0FBS0gsRUFBSTZCLE9BQU8rRixXQUFhLEVBQUl6SCxLQUFLb0gsTUFBUSxFQUM5Q3BILEtBQUtGLEVBQUlJLFNBQVN3SCxnQkFBZ0JDLGFBQWUsRUFBSTNILEtBQUtxSCxPQUFTLEVBRW5FckgsS0FBS0MsR0FBR00sTUFBTTZHLFNBQVdwSCxLQUFLb0gsVUFDOUJwSCxLQUFLQyxHQUFHTSxNQUFNOEcsVUFBWXJILEtBQUtxSCxXQUMvQnJILEtBQUtDLEdBQUdNLE1BQU00SCxnQkFBa0JuSSxLQUFLb0gsVUFFckM5RixFQUFtQkssaUJBQWlCLGlCQUFtQmMsR0FBcUJ6QyxLQUFLb0ksZUFBZTNGLElBQ2hHbkIsRUFBbUJLLGlCQUFpQixlQUFpQmMsR0FBcUJ6QyxLQUFLcUksYUFBYTVGLElBUXhGOUMsZUFBZThDLEdBQ25CLElBQUlFLEVBQU1GLEVBQUVFLElBQUlvRCxjQUNaL0YsS0FBS2lJLFlBQVlLLFFBQVEzRixJQUFRLElBQXdDLElBQW5DM0MsS0FBS2tJLFlBQVlJLFFBQVEzRixJQUMvRDNDLEtBQUtrSSxZQUFZSyxLQUFLNUYsR0FTdEJoRCxhQUFhOEMsR0FDakIsSUFBSUUsRUFBTUYsRUFBRUUsSUFBSW9ELGNBQ1p5QyxFQUFxQnhJLEtBQUtrSSxZQUFZSSxRQUFRM0YsR0FDOUMzQyxLQUFLaUksWUFBWUssUUFBUTNGLElBQVEsR0FBSzZGLEdBQXNCLEdBQzVEeEksS0FBS2tJLFlBQVlPLE9BQU9ELEVBQW9CLEdBTzdDN0ksU0FDSEssS0FBS2tJLFlBQVlRLFFBQVMvRixJQUN0QixPQUFRQSxHQUNKLElBQUssWUFDRDNDLEtBQUtILEdBQUtHLEtBQUttSCxNQUNmLE1BRUosSUFBSyxVQUNEbkgsS0FBS0YsR0FBS0UsS0FBS21ILE1BQ2YsTUFFSixJQUFLLGFBQ0RuSCxLQUFLSCxHQUFLRyxLQUFLbUgsTUFDZixNQUVKLElBQUssWUFDRG5ILEtBQUtGLEdBQUtFLEtBQUttSCxNQUNmLE1BRUosUUFDSSxVQUtSbkgsS0FBS0gsRUFBSSxJQUNURyxLQUFLSCxFQUFJLEdBRVRHLEtBQUtGLEVBQUksSUFDVEUsS0FBS0YsRUFBSSxHQUVURSxLQUFLSCxFQUFLNkIsT0FBTytGLFdBQWF6SCxLQUFLb0gsUUFDbkNwSCxLQUFLSCxFQUFLNkIsT0FBTytGLFdBQWF6SCxLQUFLb0gsT0FFbkNwSCxLQUFLRixFQUFLSSxTQUFTd0gsZ0JBQWdCQyxhQUFlM0gsS0FBS3FILFNBQ3ZEckgsS0FBS0YsRUFBS0ksU0FBU3dILGdCQUFnQkMsYUFBZTNILEtBQUtxSCxRQUczRHJILEtBQUtDLEdBQUdNLE1BQU1DLHVCQUF5QlIsS0FBS0gsUUFBUUcsS0FBS0YsT0FRdERILFlBQVlnSixHQUNmM0ksS0FBS21ILE9BQVNuSCxLQUFLZ0ksb0JBQ25CaEksS0FBS29ILE9BQVNwSCxLQUFLNkgsYUFDbkI3SCxLQUFLcUgsUUFBVXJILEtBQUs2SCxhQUVwQjdILEtBQUtDLEdBQUdNLE1BQU04RyxVQUFZckgsS0FBS3FILFdBQy9CckgsS0FBS0MsR0FBR00sTUFBTTZHLFNBQVdwSCxLQUFLb0gsVUFDOUJwSCxLQUFLQyxHQUFHTSxNQUFNNEgsZ0JBQWtCbkksS0FBS29ILFVBQ3JDcEgsS0FBS0MsR0FBR00sTUFBTXFJLGdCQUFrQkQsRUFBTXpCLE1BTW5DdkgsVUFDSEssS0FBS0MsR0FBR21ELFNBQ1I5QixFQUFtQk8sb0JBQW9CLGtCQUN2Q1AsRUFBbUJPLG9CQUFvQix1QkNuSGpDZ0gsVUFBcUJuSixFQUkvQkMsY0FDSXFCLE1BQU0sU0FBVSxHQUFJLEVBQUcsU0FKM0JoQixLQUFBOEksUUFBa0J2RixFQUFPdUUsS0FBS2lCLGdCQU0xQi9JLEtBQUtrQixpQkFDTGxCLEtBQUtDLEdBQUdRLFVBQVVDLElBQUksVUFBVyxjQUNqQ1YsS0FBS0MsR0FBR1ksY0FBYyxZQUFZTSxVQUFZbkIsS0FBSzhJLFFBQVExSCxXQUUzRHBCLEtBQUtnSixXQUFhQyxZQUFZLElBQU1qSixLQUFLNEYsU0FBVSxLQU0vQ2pHLFNBQ0pLLEtBQUs4SSxVQUNMOUksS0FBS0MsR0FBR1ksY0FBYyxZQUFZTSxVQUFZbkIsS0FBSzhJLFFBQVExSCxXQUV2RHBCLEtBQUs4SSxTQUFXLEdBQ2hCOUksS0FBS0MsR0FBR1EsVUFBVTJDLE9BQU8sY0FDekJwRCxLQUFLQyxHQUFHUSxVQUFVQyxJQUFJLGVBRXRCVixLQUFLQyxHQUFHUSxVQUFVQyxJQUFJLGNBQ3RCVixLQUFLQyxHQUFHUSxVQUFVMkMsT0FBTyxjQUdSLElBQWpCcEQsS0FBSzhJLFNBQ0xwSCxPQUFPa0IsY0FBYyxJQUFJQyxNQUFNLGVBSWhDbEQsVUFDSHVKLGNBQWNsSixLQUFLZ0osWUFNZnJKLGlCQUNKSyxLQUFLQyxHQUFHa0IsVUFBWSxvS0NyQ2RnSSxVQUFxQnpKLEVBUS9CQyxZQUFZeUosRUFBcUJDLEdBQzdCckksTUFBTSxRQUFTLEVBQUcsR0FOZGhCLEtBQUFzSixVQUdEdEosS0FBQXVKLFFBQVMsRUFLWnZKLEtBQUtvSixZQUFjQSxFQUNuQnBKLEtBQUtxSixjQUFnQkEsRUFDckJySixLQUFLK0gsT0FBUyxJQUFJSCxFQUNsQjVILEtBQUt3SixNQUFRLElBQUlYLEVBRWpCLElBQUssSUFBSTVLLEVBQUksRUFBR0EsRUFBSStCLEtBQUtvSixZQUFhbkwsSUFDbEMrQixLQUFLc0osT0FBT2YsS0FBSyxJQUFJdEIsRUFBTWIsRUFBTXFELGlCQUFrQnJELEVBQU1vQixhQUFhakUsRUFBT3VFLEtBQUs0QixXQUFXbEQsSUFBS2pELEVBQU91RSxLQUFLNEIsV0FBV2pELEtBQU1MLEVBQU1vQixhQUFhakUsRUFBT3VFLEtBQUs2QixZQUFZbkQsSUFBS2pELEVBQU91RSxLQUFLNkIsWUFBWWxELEtBQU1MLEVBQU1vQixhQUFhakUsRUFBT3VFLEtBQUs2QixZQUFZbkQsSUFBS2pELEVBQU91RSxLQUFLNkIsWUFBWWxELE9BR3pSbkYsRUFBbUJLLGlCQUFpQixhQUFjLEtBQzlDM0IsS0FBS3VKLFFBQVMsRUFDZHZKLEtBQUs0SixRQUFRLGtCQU9kakssU0FDSEssS0FBSytILE9BQU9uQyxTQUNaNUYsS0FBS3NKLE9BQU9aLFFBQVEsQ0FBQ0MsRUFBT3RELEtBQ3hCc0QsRUFBTS9DLFNBRUZRLEVBQU15RCxlQUFlN0osS0FBSytILE9BQU8rQixpQkFBa0JuQixFQUFNbUIsb0JBQXFDLElBQWhCOUosS0FBS3VKLFNBQ25GdkosS0FBSytILE9BQU9nQyxZQUFZcEIsR0FDeEJBLEVBQU1pQixVQUNONUosS0FBS3NKLE9BQU9iLE9BQU9wRCxFQUFPLEdBQzFCM0QsT0FBT2tCLGNBQWMsSUFBSW9ILFlBQVkscUJBQXNCbkUsUUFBUzVFLE1BQU9qQixLQUFLcUosa0JBRXJELElBQXZCckosS0FBS3NKLE9BQU9XLFFBQ1pqSyxLQUFLNEosUUFBUSxvQkFXckJqSyxRQUFRdUssR0FDWmxLLEtBQUt3SixNQUFNSSxVQUNYNUosS0FBSytILE9BQU82QixVQUNaNUosS0FBS3NKLE9BQU9aLFFBQVEsQ0FBQ0MsRUFBT3RELEtBQ3hCc0QsRUFBTWlCLFVBQ041SixLQUFLc0osT0FBT2IsT0FBT3BELEVBQU8sS0FFOUIvRCxFQUFtQk8sb0JBQW9CLGNBQ3ZDSCxPQUFPa0IsY0FBYyxJQUFJQyxNQUFNcUgsSUFDL0JsSyxLQUFLQyxHQUFHbUQsVUNuRWhCMUIsT0FBT0MsaUJBQWlCLE9BQVEsSUFBTSxVQ2NsQ2hDLGNBVFFLLEtBQUFtSyxjQUF3QjVHLEVBQU91RSxLQUFLcUMsY0FDcENuSyxLQUFBb0ssb0JBQThCLEVBQzlCcEssS0FBQXFLLHNCQUFnQzlHLEVBQU91RSxLQUFLdUMsc0JBQzVDckssS0FBQXNLLHlCQUFtQy9HLEVBQU91RSxLQUFLd0MseUJBQy9DdEssS0FBQXVLLGdCQUEwQmhILEVBQU91RSxLQUFLeUMsZ0JBTTFDdkssS0FBS3dLLElBQU0sSUFBSS9FLEVBQ2Z6RixLQUFLaUcsU0FBV2pHLEtBQUt5SyxvQkFDckJ6SyxLQUFLMEssV0FDTDFLLEtBQUt3RCxZQUFjLElBQUlILEdBRXRCLGdCQUFpQixnQkFBZ0I4QixJQUFLK0UsSUFDbkN4SSxPQUFPQyxpQkFBaUJ1SSxFQUFZekgsR0FBTXpDLEtBQUs0RixPQUFPbkQsRUFBRTdDLFVBRTNELG1CQUFvQixzQkFBdUIsc0JBQXNCdUYsSUFBSytFLElBQ25FeEksT0FBT0MsaUJBQWlCdUksRUFBVyxJQUFNbEssS0FBSzJLLG1CQUVsRGpKLE9BQU9DLGlCQUFpQixpQkFBa0IsSUFBTTNCLEtBQUs0SyxXQVNqRGpMLG9CQUNKLElBQUlzRyxFQUFXLEVBQ2YsSUFBSyxJQUFJaEksRUFBSSxFQUFHQSxFQUFJK0IsS0FBS21LLGNBQWVsTSxJQUVwQ2dJLElBRGVqRyxLQUFLcUssdUJBQStCLElBQU5wTSxFQUFVLEVBQUsrQixLQUFLc0sseUJBQTJCck0sSUFDcEUrQixLQUFLdUssZ0JBRWpDLE9BQU90RSxFQU1IdEcsZ0JBQ3NCLElBQWZLLEtBQUs2SyxPQUNaN0ssS0FBSzZLLE1BQU1qRixTQUVma0Ysc0JBQXNCLElBQU05SyxLQUFLMEssWUFRN0IvSyxPQUFPQyxHQUVYLEdBREFJLEtBQUtvSyxzQkFDRHBLLEtBQUtvSyxzQkFBd0JwSyxLQUFLbUssY0FHbEMsT0FGQW5LLEtBQUt3SyxJQUFJTyxRQUFRL0ssS0FBS2lHLGVBQ3RCakcsS0FBS2dMLFlBSVRoTCxLQUFLd0ssSUFBSVMsVUFBVXJMLEdBTWZELGdCQUNBSyxLQUFLNkssUUFBK0IsSUFBdEI3SyxLQUFLNkssTUFBTXRCLFNBQ3pCdkosS0FBS3FLLHVCQUF5QnJLLEtBQUtzSyxpQ0FHaEN0SyxLQUFLNkssTUFDWjdLLEtBQUt3SyxJQUFJVSxXQUVUbEwsS0FBSzZLLE1BQVEsSUFBSTFCLEVBQU1uSixLQUFLcUssc0JBQXVCckssS0FBS3VLLGlCQU1wRDVLLFVBQ0pLLEtBQUt3SyxJQUFJSSxVQUNUNUssS0FBS29LLG9CQUFzQixFQUMzQnBLLEtBQUtxSyxzQkFBd0I5RyxFQUFPdUUsS0FBS3VDLHNCQU1yQzFLLFlBQ0osSUFBSXNCLEVBQVFqQixLQUFLd0ssSUFBSVcsV0FDckJuTCxLQUFLd0QsWUFBWXdILFVBQVUvSixHQUFPd0QsS0FBTVEsSUFDcENtRyxRQUFRQyxJQUFJLDhCQUErQnBHIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRG9tRWxlbWVudCB7XG4gICAgcHJvdGVjdGVkIGVsOiBIVE1MRWxlbWVudDtcbiAgICBwcm90ZWN0ZWQgeDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCB5OiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcih0eXBlOiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCBwYXJlbnRDbGFzczogc3RyaW5nID0gJycpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcblxuICAgICAgICB0aGlzLmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGxldCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKTtcbiAgICAgICAgaWYgKG1haW4gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIjxtYWluPiBlbGVtZW50IGRvZXNuJ3QgZXhpc3QhXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8tMSBjaGVjayBpcyB0byBsZXQgQ1NTIGRvIGl0cyBvd24gam9iIEB0b2RvIGNsZWFuZXIgc29sdXRpb24/XG4gICAgICAgIGlmICh0aGlzLnggPiAtMSAmJiB0aGlzLnkgPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5lbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7dGhpcy54fXB4LCAke3RoaXMueX1weClgO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZChgZ2FtZS0ke3R5cGV9YCk7XG5cbiAgICAgICAgaWYgKHBhcmVudENsYXNzID09PSAnJykge1xuICAgICAgICAgICAgbWFpbi5hcHBlbmRDaGlsZCh0aGlzLmVsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBwYXJlbnRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5nYW1lLSR7cGFyZW50Q2xhc3N9YCk7XG4gICAgICAgICAgICBpZiAocGFyZW50RWwgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYDwuZ2FtZS0ke3BhcmVudENsYXNzfT4gZWxlbWVudCBkb2Vzbid0IGV4aXN0IWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50RWwuYXBwZW5kQ2hpbGQodGhpcy5lbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBDbGllbnRSZWN0XG4gICAgICovXG4gICAgcHVibGljIGdldENsaWVudFJlYWN0KCk6IENsaWVudFJlY3QgfCBET01SZWN0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IERvbUVsZW1lbnQgZnJvbSBcIi4uL2hlbHBlcnMvZG9tZWxlbWVudFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTY29yZSBleHRlbmRzIERvbUVsZW1lbnQge1xuICAgIHByaXZhdGUgc2NvcmU6IG51bWJlciA9IDA7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoJ3Njb3JlJywgLTEsIC0xLCAnZ3VpJyk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJUZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5zY29yZS1jb3VudCcpLmlubmVySFRNTCA9IHRoaXMuc2NvcmUudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdtZXNzYWdlJywgJ2lzLXdhcm5pbmcnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBjdXJyZW50IHNjb3JlXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBzY29yZSBiYXNlZCBvbiBhIEN1c3RvbSBFdmVudCBmcm9tIHRoZSBCbG9jayBvYmplY3RcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzY29yZVxuICAgICAqIEBwYXJhbSBbcmVzZXRdXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZShzY29yZTogbnVtYmVyLCByZXNldDogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2NvcmUgPSByZXNldCA/IHNjb3JlIDogdGhpcy5zY29yZSArIHNjb3JlO1xuICAgICAgICB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5zY29yZS1jb3VudCcpLmlubmVySFRNTCA9IHRoaXMuc2NvcmUudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZW1wbGF0ZSBuZWVkZWQgdG8gc2hvdyBtb3JlIGVsZW1lbnRzXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW5kZXJUZW1wbGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWVzc2FnZS1ib2R5XCI+XG4gICAgICAgICAgICAgICAgPHNwYW4+c2NvcmU6IDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNjb3JlLWNvdW50XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2luZG93RXZlbnRIYW5kbGVyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmdW5jdGlvbk1hcDogeyBbazogc3RyaW5nXTogYW55IH0gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEFkZCBsaXN0ZW5lciB0byB3aW5kb3cgd2l0aCBuYW1lIHNwYWNpbmdcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgICAqIEBwYXJhbSBmdW5jXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBhZGRFdmVudExpc3RlbmVyKGV2ZW50OiBzdHJpbmcsIGZ1bmM6IGFueSk6IHZvaWQge1xuICAgICAgICBXaW5kb3dFdmVudEhhbmRsZXIuZnVuY3Rpb25NYXBbZXZlbnRdID0gZnVuYztcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQuc3BsaXQoJy4nKVswXSwgV2luZG93RXZlbnRIYW5kbGVyLmZ1bmN0aW9uTWFwW2V2ZW50XSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGxpc3RlbmVyIGZyb20gd2luZG93IHdpdGggbmFtZSBzcGFjaW5nXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudC5zcGxpdCgnLicpWzBdLCBXaW5kb3dFdmVudEhhbmRsZXIuZnVuY3Rpb25NYXBbZXZlbnRdKTtcbiAgICAgICAgZGVsZXRlIFdpbmRvd0V2ZW50SGFuZGxlci5mdW5jdGlvbk1hcFtldmVudF07XG4gICAgfVxufVxuIiwiaW1wb3J0IERvbUVsZW1lbnQgZnJvbSBcIi4uL2hlbHBlcnMvZG9tZWxlbWVudFwiO1xuaW1wb3J0IFdpbmRvd0V2ZW50SGFuZGxlciBmcm9tIFwiLi4vaGVscGVycy93aW5kb3dldmVudGhhbmRsZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVzc2FnZVNjcmVlbiBleHRlbmRzIERvbUVsZW1lbnQge1xuICAgIHByaXZhdGUgY3VycmVudEV2ZW50ITogc3RyaW5nO1xuICAgIHByaXZhdGUgaXNBY3RpdmU6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIHByaXZhdGUgbWVzc2FnZXM6IHsgW2s6IHN0cmluZ106IHsgJ2hlYWRlcic6IHN0cmluZywgJ2JvZHknOiBzdHJpbmcsICdjbGFzc05hbWUnOiBzdHJpbmcgfSB9ID0ge1xuICAgICAgICAnZ2FtZTpzdGFydCc6IHtcbiAgICAgICAgICAgICdoZWFkZXInOiAnV2VsY29tZSB0byBCbG9jay1vLUJsb2NrIScsXG4gICAgICAgICAgICAnYm9keSc6ICdJdFxcJ3MgdGltZSB0byBjYXRjaCB0aGVtIGJsb2NrcyE8YnIvPjxici8+VXNlIHlvdXIgYXJyb3cga2V5cyB0byBtb3ZlIHlvdXIgcGxheWVyIGFyb3VuZCBhbmQgcHJlc3Mgc3BhY2UgdG8gc3RhcnQuPGJyLz48YnIvPlByZXNzIC08c3Ryb25nPkg8L3N0cm9uZz4tIHRvIHZpZXcgdGhlIGhpZ2hzY29yZSBsaXN0JyxcbiAgICAgICAgICAgICdjbGFzc05hbWUnOiAnaXMtaW5mbydcbiAgICAgICAgfSxcbiAgICAgICAgJ2dhbWU6ZW5kJzoge1xuICAgICAgICAgICAgJ2hlYWRlcic6ICdZb3VyIGdhbWUgaXMgb3ZlciEnLFxuICAgICAgICAgICAgJ2JvZHknOiAnWW91IG1hZGUgaXQsIHlvdXIgZmluYWwgc2NvcmUgaXMgX19TQ09SRV9fIG91dCBvZiBtYXggX19NQVhfU0NPUkVfXyBwb2ludHMuPGJyLz48YnIvPlRoYW5rcyBmb3IgcGxheWluZywgcHJlc3Mgc3BhY2UgdG8gcmVzdGFydCB0aGUgbWFkbmVzcy48YnIvPjxici8+UHJlc3MgLTxzdHJvbmc+SDwvc3Ryb25nPi0gdG8gdmlldyB0aGUgaGlnaHNjb3JlIGxpc3QnLFxuICAgICAgICAgICAgJ2NsYXNzTmFtZSc6ICdpcy1zdWNjZXNzJ1xuICAgICAgICB9LFxuICAgICAgICAnbGV2ZWw6c3VjY2Vzcyc6IHtcbiAgICAgICAgICAgICdoZWFkZXInOiAnWUVBSCEgTGV2ZWwgY29tcGxldGVkIScsXG4gICAgICAgICAgICAnYm9keSc6ICdQZXJmb3JtaW5nIGxpa2UgYSBib3NzISBQcmVzcyBzcGFjZSB0byBwcm9jZWVkIHRvIHRoZSBuZXh0IGxldmVsIGFuZCBjYXRjaCBldmVuIG1vcmUgYmxvY2tzJyxcbiAgICAgICAgICAgICdjbGFzc05hbWUnOiAnaXMtc3VjY2VzcydcbiAgICAgICAgfSxcbiAgICAgICAgJ2xldmVsOmZhaWxlZCc6IHtcbiAgICAgICAgICAgICdoZWFkZXInOiAnQUFIISBMZXZlbCBmYWlsZWQhJyxcbiAgICAgICAgICAgICdib2R5JzogJ1RyeSBhZ2FpbiBhbmQgc2hvdyB1cyB3aGF0IHlvdVxcJ3JlIG1hZGUgb2ZmISBQcmVzcyBzcGFjZSB0byByZXN0YXJ0IHRoaXMgbGV2ZWwnLFxuICAgICAgICAgICAgJ2NsYXNzTmFtZSc6ICdpcy1kYW5nZXInXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdtZXNzYWdlc2NyZWVuJywgLTEsIC0xLCAnZ3VpJyk7XG4gICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnbWVzc2FnZScpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyVGVtcGxhdGUoKTtcbiAgICAgICAgdGhpcy5zaG93KCdnYW1lOnN0YXJ0Jyk7XG4gICAgICAgIFdpbmRvd0V2ZW50SGFuZGxlci5hZGRFdmVudExpc3RlbmVyKCdrZXl1cC5tZXNzYWdlc2NyZWVuJywgKGU6IEtleWJvYXJkRXZlbnQpID0+IHRoaXMua2V5Qm9hcmRIYW5kbGVyKGUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdGhlIHNwYWNlYmFyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGtleUJvYXJkSGFuZGxlcihlOiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGlmIChlLmtleSA9PT0gJyAnICYmIHRoaXMuaXNBY3RpdmUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChgJHt0aGlzLmN1cnJlbnRFdmVudH06Y2xpY2tgKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IHRoZSBkZXNpcmVkIG1lc3NhZ2UgKHR5cGUgbWF0Y2hlcyBpbmRleCBpbiBvYmplY3QpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHlwZVxuICAgICAqIEBwYXJhbSBbYm9keVJlcGxhY2VtZW50c11cbiAgICAgKi9cbiAgICBwdWJsaWMgc2hvdyh0eXBlOiBzdHJpbmcsIGJvZHlSZXBsYWNlbWVudHM6IHsgW2s6IHN0cmluZ106IHN0cmluZyB9ID0ge30pOiB2b2lkIHtcbiAgICAgICAgbGV0IG1lc3NhZ2VIZWFkZXIgPSB0aGlzLm1lc3NhZ2VzW3R5cGVdLmhlYWRlcjtcbiAgICAgICAgbGV0IG1lc3NhZ2VCb2R5ID0gdGhpcy5tZXNzYWdlc1t0eXBlXS5ib2R5O1xuICAgICAgICBmb3IgKGxldCByZXBsYWNlbWVudCBpbiBib2R5UmVwbGFjZW1lbnRzKSB7XG4gICAgICAgICAgICBtZXNzYWdlQm9keSA9IG1lc3NhZ2VCb2R5LnJlcGxhY2UocmVwbGFjZW1lbnQsIGJvZHlSZXBsYWNlbWVudHNbcmVwbGFjZW1lbnRdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZWwucXVlcnlTZWxlY3RvcignLm1lc3NhZ2UtaGVhZGVyJykuaW5uZXJIVE1MID0gbWVzc2FnZUhlYWRlcjtcbiAgICAgICAgdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZS1ib2R5JykuaW5uZXJIVE1MID0gbWVzc2FnZUJvZHk7XG5cbiAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdzaG93JywgdGhpcy5tZXNzYWdlc1t0eXBlXS5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLmN1cnJlbnRFdmVudCA9IHR5cGU7XG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhpZGUgbWVzc2FnZSBvbiBzY3JlZW5cbiAgICAgKi9cbiAgICBwdWJsaWMgaGlkZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93JywgJ2lzLWluZm8nLCAnaXMtc3VjY2VzcycsICdpcy1kYW5nZXInKTtcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRlbXBsYXRlIG5lZWRlZCB0byBzaG93IG1vcmUgZWxlbWVudHNcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlbmRlclRlbXBsYXRlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXNzYWdlLWhlYWRlclwiPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1lc3NhZ2UtYm9keVwiPjwvZGl2PlxuICAgICAgICBgO1xuICAgIH1cbn1cbiIsImltcG9ydCBjb25maWcgZnJvbSAnLi9jb25maWcuanNvbic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERhdGFTZXJ2aWNlIHtcbiAgICBwcml2YXRlIGVuZFBvaW50TGlzdDogc3RyaW5nID0gYC9kYXRhYmFzZXMvJHtjb25maWcuZGF0YVNlcnZpY2UuZGF0YWJhc2VOYW1lfS9jb2xsZWN0aW9ucy8ke2NvbmZpZy5kYXRhU2VydmljZS5jb2xsZWN0aW9uTmFtZX0/YXBpS2V5PSR7Y29uZmlnLmRhdGFTZXJ2aWNlLmFwaUtleX1gO1xuICAgIHByaXZhdGUgZW5kUG9pbnRTYXZlOiBzdHJpbmcgPSBgL2RhdGFiYXNlcy8ke2NvbmZpZy5kYXRhU2VydmljZS5kYXRhYmFzZU5hbWV9L2NvbGxlY3Rpb25zLyR7Y29uZmlnLmRhdGFTZXJ2aWNlLmNvbGxlY3Rpb25OYW1lfT9hcGlLZXk9JHtjb25maWcuZGF0YVNlcnZpY2UuYXBpS2V5fWA7XG4gICAgcHJpdmF0ZSBkaXNhYmxlZE1lc3NhZ2U6c3RyaW5nID0gJ0RhdGFzZXJ2aWNlIGlzIGRpc2FibGVkJztcblxuICAgIC8qKlxuICAgICAqIFN0b3JlIHRoZSBsYXRlc3Qgc2NvcmUgaW4gdGhlIERCXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2NvcmVcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx7fT59XG4gICAgICovXG4gICAgcHVibGljIHNhdmVTY29yZShzY29yZTogbnVtYmVyKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgaWYgKGNvbmZpZy5mdW5jdGlvbmFsaXRpZXMuZGF0YVNlcnZpY2UgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHVybCA9IGAke2NvbmZpZy5kYXRhU2VydmljZS5iYXNlVXJsfSR7dGhpcy5lbmRQb2ludFNhdmV9YDtcbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCwge1xuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIHNjb3JlOiBzY29yZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgbW9kZTogJ2NvcnMnXG4gICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIHRoZSBjdXJyZW50IHNjb3JlcyBmcm9tIHRoZSBEQlxuICAgICAqXG4gICAgICogQHJldHVybnMge1Byb21pc2U8W10+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTY29yZXMoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgaWYgKGNvbmZpZy5mdW5jdGlvbmFsaXRpZXMuZGF0YVNlcnZpY2UgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHVybCA9IGAke2NvbmZpZy5kYXRhU2VydmljZS5iYXNlVXJsfSR7dGhpcy5lbmRQb2ludExpc3R9JnM9e1wic2NvcmVcIjogLTF9Jmw9MTBgO1xuICAgICAgICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgICAgICAgICBtb2RlOiAnY29ycydcbiAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYWwgbWVzc2FnZSB3aGVuIHRoaXMgc2VydmljZSBpcyBpbmFjdGl2ZVxuICAgICAqXG4gICAgICogQHJldHVybnMge1Byb21pc2U8e30+fVxuICAgICAqL1xuICAgIHByaXZhdGUgZGlzYWJsZWQoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHtcImVycm9yXCI6IHRoaXMuZGlzYWJsZWRNZXNzYWdlfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCBEb21FbGVtZW50IGZyb20gXCIuLi9oZWxwZXJzL2RvbWVsZW1lbnRcIjtcbmltcG9ydCBEYXRhU2VydmljZSBmcm9tIFwiLi4vZGF0YXNlcnZpY2VcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGlnaFNjb3JlTGlzdCBleHRlbmRzIERvbUVsZW1lbnQge1xuICAgIHByaXZhdGUgZGF0YVNlcnZpY2U6IERhdGFTZXJ2aWNlO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdoaWdoc2NvcmVsaXN0JywgLTEsIC0xLCAnZ3VpJyk7XG4gICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnbWVzc2FnZScsICdpcy13YXJuaW5nJyk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJUZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlID0gbmV3IERhdGFTZXJ2aWNlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hvdyB0aGUgaGlnaCBzY29yZSBsaXN0XG4gICAgICovXG4gICAgcHVibGljIHNob3coKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZ2V0U2NvcmVzKCkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgbGV0IHRCb2R5ID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcudGJvZHknKTtcbiAgICAgICAgICAgIHRCb2R5LmlubmVySFRNTCA9IHRoaXMuZ2V0VGJvZHlUZW1wbGF0ZShkYXRhKTtcbiAgICAgICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIaWRlIGl0IHBlcmlvZFxuICAgICAqL1xuICAgIHB1YmxpYyBoaWRlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG1hcHBlZCBIVE1MIDx0cj4gbGlzdCBmb3IgYXBwZW5kaW5nIGluIDx0Ym9keT5cbiAgICAgKlxuICAgICAqIEB0b2RvIFJlZmFjdG9yIGR1ZSB0byAnbWFrZSBzdGF0aWMnIHdhcm5pbmdcbiAgICAgKiBAcGFyYW0ge1t7fV19IGRhdGFcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0VGJvZHlUZW1wbGF0ZShkYXRhOiB7IHNjb3JlOiBudW1iZXIsIF9pZDogeyAkb2lkOiBzdHJpbmcgfSB9W10pOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgJHtkYXRhLm1hcCgoaXRlbSwgaW5kZXgpID0+IGA8dHI+XG4gICAgICAgICAgICAgICAgPHRkPiR7aW5kZXggKyAxfTwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkPiR7aXRlbS5faWQuJG9pZH08L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD4ke2l0ZW0uc2NvcmUudG9TdHJpbmcoKX08L3RkPlxuICAgICAgICAgICAgPC90cj5gKS5qb2luKCcnKX1cbiAgICAgICAgYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZW1wbGF0ZSBuZWVkZWQgdG8gc2hvdyBtb3JlIGVsZW1lbnRzXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW5kZXJUZW1wbGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWVzc2FnZS1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICA8cD5Ub3AgMTAgSGlnaCBTY29yZXMgKHByZXNzIC08c3Ryb25nPmVzYzwvc3Ryb25nPi0gdG8gcmV0dXJuKTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1lc3NhZ2UtYm9keVwiPlxuICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cInRhYmxlXCI+XG4gICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoPiM8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoPk1vbmdvSUQ8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlNjb3JlPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPHRib2R5IGNsYXNzPVwidGJvZHlcIj48L3Rib2R5PlxuICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICB9XG59XG4iLCJpbXBvcnQgU2NvcmUgZnJvbSAnLi9zY29yZSc7XG5pbXBvcnQgTWVzc2FnZVNjcmVlbiBmcm9tICcuL21lc3NhZ2VzY3JlZW4nO1xuaW1wb3J0IERvbUVsZW1lbnQgZnJvbSBcIi4uL2hlbHBlcnMvZG9tZWxlbWVudFwiO1xuaW1wb3J0IEhpZ2hTY29yZUxpc3QgZnJvbSBcIi4vaGlnaHNjb3JlbGlzdFwiO1xuaW1wb3J0IFdpbmRvd0V2ZW50SGFuZGxlciBmcm9tIFwiLi4vaGVscGVycy93aW5kb3dldmVudGhhbmRsZXJcIjtcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnLmpzb24nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHVUkgZXh0ZW5kcyBEb21FbGVtZW50IHtcbiAgICBwcml2YXRlIHNjb3JlOiBTY29yZTtcbiAgICBwcml2YXRlIG1lc3NhZ2VTY3JlZW46IE1lc3NhZ2VTY3JlZW47XG4gICAgcHJpdmF0ZSBoaWdoU2NvcmVMaXN0OiBIaWdoU2NvcmVMaXN0O1xuICAgIHByaXZhdGUgaGlnaFNjb3JlTGlzdFZpc2libGU6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignZ3VpJywgLTEsIC0xKTtcblxuICAgICAgICB0aGlzLnNjb3JlID0gbmV3IFNjb3JlKCk7XG4gICAgICAgIHRoaXMubWVzc2FnZVNjcmVlbiA9IG5ldyBNZXNzYWdlU2NyZWVuKCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsZXZlbDpzY29yZVVwZGF0ZScsIChlKSA9PiB0aGlzLnNjb3JlLnVwZGF0ZSgoZSBhcyBDdXN0b21FdmVudCkuZGV0YWlsLnNjb3JlKSk7XG5cbiAgICAgICAgaWYgKGNvbmZpZy5mdW5jdGlvbmFsaXRpZXMuZGF0YVNlcnZpY2UgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMuaGlnaFNjb3JlTGlzdCA9IG5ldyBIaWdoU2NvcmVMaXN0KCk7XG4gICAgICAgICAgICBXaW5kb3dFdmVudEhhbmRsZXIuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAuaGlnaHNjb3JlbGlzdCcsIChlOiBLZXlib2FyZEV2ZW50KSA9PiB0aGlzLmtleUJvYXJkSGFuZGxlcihlKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdGhlIHNwYWNlYmFyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGVcbiAgICAgKi9cbiAgICBrZXlCb2FyZEhhbmRsZXIoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICBsZXQga2V5ID0gZS5rZXkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKGtleSA9PT0gJ2gnICYmIHRoaXMuaGlnaFNjb3JlTGlzdFZpc2libGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLmhpZ2hTY29yZUxpc3RWaXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaGlnaFNjb3JlTGlzdC5zaG93KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnZXNjYXBlJyAmJiB0aGlzLmhpZ2hTY29yZUxpc3RWaXNpYmxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLmhpZ2hTY29yZUxpc3RWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmhpZ2hTY29yZUxpc3QuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSBsZXZlbCBpcyBkb25lXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgICAqL1xuICAgIHB1YmxpYyBsZXZlbERvbmUodHlwZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMubWVzc2FnZVNjcmVlbi5zaG93KHR5cGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgbmV3IGxldmVsIHN0YXJ0c1xuICAgICAqL1xuICAgIHB1YmxpYyBuZXdMZXZlbCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tZXNzYWdlU2NyZWVuLmhpZGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiB0aGUgZ2FtZSBpcyBkb25lXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWF4U2NvcmVcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2FtZUVuZChtYXhTY29yZTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMubWVzc2FnZVNjcmVlbi5zaG93KCdnYW1lOmVuZCcsIHtcbiAgICAgICAgICAgICdfX1NDT1JFX18nOiB0aGlzLnNjb3JlLmdldCgpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAnX19NQVhfU0NPUkVfXyc6IG1heFNjb3JlLnRvU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gd2UgbmVlZCB0byByZXN0YXJ0LCBnbyB0byBmaXJzdCBzY3JlZW4gYW5kIHNldCBzY29yZSB0byAwXG4gICAgICovXG4gICAgcHVibGljIHJlc3RhcnQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubWVzc2FnZVNjcmVlbi5oaWRlKCk7XG4gICAgICAgIHRoaXMubWVzc2FnZVNjcmVlbi5zaG93KCdnYW1lOnN0YXJ0Jyk7XG4gICAgICAgIHRoaXMuc2NvcmUudXBkYXRlKDAsIHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldFNjb3JlKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3JlLmdldCgpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFV0aWxzIHtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRSYW5kb21Db2xvcigpOiBzdHJpbmcge1xuICAgICAgICBsZXQgbyA9IE1hdGgucm91bmQsIHIgPSBNYXRoLnJhbmRvbSwgcyA9IDI1NTtcbiAgICAgICAgcmV0dXJuIGByZ2JhKCR7byhyKCkgKiBzKX0sJHtvKHIoKSAqIHMpfSwke28ocigpICogcyl9LDEpYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3RhdGljIGdldFJhbmRvbUludChtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NsaWVudFJlY3R9IGFcbiAgICAgKiBAcGFyYW0ge0NsaWVudFJlY3R9IGJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBzdGF0aWMgY2hlY2tDb2xsaXNpb24oYTogQ2xpZW50UmVjdCwgYjogQ2xpZW50UmVjdCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKGEubGVmdCA8PSBiLnJpZ2h0ICYmXG4gICAgICAgICAgICBiLmxlZnQgPD0gYS5yaWdodCAmJlxuICAgICAgICAgICAgYS50b3AgPD0gYi5ib3R0b20gJiZcbiAgICAgICAgICAgIGIudG9wIDw9IGEuYm90dG9tKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgRG9tRWxlbWVudCBmcm9tIFwiLi4vaGVscGVycy9kb21lbGVtZW50XCI7XG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4uL2hlbHBlcnMvdXRpbHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmxvY2sgZXh0ZW5kcyBEb21FbGVtZW50IHtcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNwZWVkOiBudW1iZXI7XG4gICAgcHJpdmF0ZSByZWFkb25seSB3aWR0aDogbnVtYmVyO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgaGVpZ2h0OiBudW1iZXI7XG4gICAgcHVibGljIGNvbG9yOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBkZXN0aW5hdGlvbiA9IHt4OiAwLCB5OiAwfTtcblxuICAgIGNvbnN0cnVjdG9yKGNvbG9yOiBzdHJpbmcsIHNwZWVkOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyKCdibG9jaycsIDAsIDAsICdsZXZlbCcpO1xuXG4gICAgICAgIHRoaXMuc3BlZWQgPSBzcGVlZDtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHJlcGVhdGluZy1saW5lYXItZ3JhZGllbnQoJHtVdGlscy5nZXRSYW5kb21JbnQoMCwzNjApfWRlZywgIzAwMDAwMCwgIzAwMDAwMCAke1V0aWxzLmdldFJhbmRvbUludCgyLDEwKX1weCwgJHt0aGlzLmNvbG9yfSAxMHB4LCAke3RoaXMuY29sb3J9ICR7VXRpbHMuZ2V0UmFuZG9tSW50KDIwLDQwKX1weClgO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLndpZHRoID0gYCR7dGhpcy53aWR0aH1weGA7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5oZWlnaHR9cHhgO1xuXG4gICAgICAgIHRoaXMueCA9IFV0aWxzLmdldFJhbmRvbUludCgwLCAod2luZG93Lm91dGVyV2lkdGggLSB0aGlzLndpZHRoKSk7XG4gICAgICAgIHRoaXMueSA9IFV0aWxzLmdldFJhbmRvbUludCgwLCAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCAtIHRoaXMuaGVpZ2h0KSk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3RoaXMueH1weCwgJHt0aGlzLnl9cHgpYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVyIGZvciBjbGlja2luZyB0aGUgYmxvY2tzXG4gICAgICovXG4gICAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFpbiB1cGRhdGUgaGFuZGxlciBmb3IgdGhlIGdhbWUgZm9yIG1vdmluZyBvdXIgYmxvY2sgcmFuZG9tbHkgb3ZlciB0aGUgc2NyZWVuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMueCA+ICh0aGlzLmRlc3RpbmF0aW9uLnggLSB0aGlzLnNwZWVkKSAmJiB0aGlzLnggPCAodGhpcy5kZXN0aW5hdGlvbi54ICsgdGhpcy5zcGVlZCkpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ueCA9IFV0aWxzLmdldFJhbmRvbUludCgwLCAod2luZG93Lm91dGVyV2lkdGggLSB0aGlzLndpZHRoKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMueSA+ICh0aGlzLmRlc3RpbmF0aW9uLnkgLSB0aGlzLnNwZWVkKSAmJiB0aGlzLnkgPCAodGhpcy5kZXN0aW5hdGlvbi55ICsgdGhpcy5zcGVlZCkpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ueSA9IFV0aWxzLmdldFJhbmRvbUludCgwLCAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCAtIHRoaXMuaGVpZ2h0KSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kZXN0aW5hdGlvbi54ID49IHRoaXMueCkge1xuICAgICAgICAgICAgdGhpcy54ICs9IHRoaXMuc3BlZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnggLT0gdGhpcy5zcGVlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRlc3RpbmF0aW9uLnkgPj0gdGhpcy55KSB7XG4gICAgICAgICAgICB0aGlzLnkgKz0gdGhpcy5zcGVlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMueSAtPSB0aGlzLnNwZWVkO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7dGhpcy54fXB4LCAke3RoaXMueX1weClgO1xuICAgIH1cbn1cbiIsImltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnLmpzb24nO1xuaW1wb3J0IERvbUVsZW1lbnQgZnJvbSBcIi4uL2hlbHBlcnMvZG9tZWxlbWVudFwiO1xuaW1wb3J0IEJsb2NrIGZyb20gXCIuL2Jsb2NrXCI7XG5pbXBvcnQgV2luZG93RXZlbnRIYW5kbGVyIGZyb20gXCIuLi9oZWxwZXJzL3dpbmRvd2V2ZW50aGFuZGxlclwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIgZXh0ZW5kcyBEb21FbGVtZW50IHtcbiAgICBwcml2YXRlIGhlaWdodDogbnVtYmVyID0gMTA7XG4gICAgcHJpdmF0ZSB3aWR0aDogbnVtYmVyID0gMTA7XG4gICAgcHJpdmF0ZSBncm93dGhGYWN0b3I6IG51bWJlciA9IGNvbmZpZy5nYW1lLnBsYXllci5ncm93dGhGYWN0b3I7XG4gICAgcHJpdmF0ZSBzcGVlZDogbnVtYmVyID0gY29uZmlnLmdhbWUucGxheWVyLnNwZWVkO1xuICAgIHByaXZhdGUgc3BlZWRJbmNyZWFzZUZhY3RvcjogbnVtYmVyID0gY29uZmlnLmdhbWUucGxheWVyLnNwZWVkSW5jcmVhc2VGYWN0b3I7XG4gICAgcHJpdmF0ZSBrZXlzQWxsb3dlZDogc3RyaW5nW10gPSBbJ2Fycm93bGVmdCcsICdhcnJvd3VwJywgJ2Fycm93cmlnaHQnLCAnYXJyb3dkb3duJ107XG4gICAgcHJpdmF0ZSBrZXlzUHJlc3NlZDogc3RyaW5nW10gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigncGxheWVyJywgMCwgMCwgJ2xldmVsJyk7XG4gICAgICAgIHRoaXMueCA9IHdpbmRvdy5vdXRlcldpZHRoIC8gMiAtIHRoaXMud2lkdGggLyAyO1xuICAgICAgICB0aGlzLnkgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IC8gMiAtIHRoaXMuaGVpZ2h0IC8gMjtcblxuICAgICAgICB0aGlzLmVsLnN0eWxlLndpZHRoID0gYCR7dGhpcy53aWR0aH1weGA7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5oZWlnaHR9cHhgO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLmJvcmRlclJhZGl1cyA9IGAke3RoaXMud2lkdGh9cHhgO1xuXG4gICAgICAgIFdpbmRvd0V2ZW50SGFuZGxlci5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duLnBsYXllcicsIChlOiBLZXlib2FyZEV2ZW50KSA9PiB0aGlzLmtleURvd25IYW5kbGVyKGUpKTtcbiAgICAgICAgV2luZG93RXZlbnRIYW5kbGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwLnBsYXllcicsIChlOiBLZXlib2FyZEV2ZW50KSA9PiB0aGlzLmtleVVwSGFuZGxlcihlKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogS2V5IGRvd24gaGFuZGxlciBmb3IgbW92aW5nIHRoZSBwbGF5ZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlXG4gICAgICovXG4gICAgcHJpdmF0ZSBrZXlEb3duSGFuZGxlcihlOiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGxldCBrZXkgPSBlLmtleS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAodGhpcy5rZXlzQWxsb3dlZC5pbmRleE9mKGtleSkgPiAtMSAmJiB0aGlzLmtleXNQcmVzc2VkLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMua2V5c1ByZXNzZWQucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogS2V5IGRvd24gaGFuZGxlciBmb3IgbW92aW5nIHRoZSBwbGF5ZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlXG4gICAgICovXG4gICAgcHJpdmF0ZSBrZXlVcEhhbmRsZXIoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICBsZXQga2V5ID0gZS5rZXkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgbGV0IGtleVByZXNzZWRQb3NpdGlvbiA9IHRoaXMua2V5c1ByZXNzZWQuaW5kZXhPZihrZXkpO1xuICAgICAgICBpZiAodGhpcy5rZXlzQWxsb3dlZC5pbmRleE9mKGtleSkgPiAtMSAmJiBrZXlQcmVzc2VkUG9zaXRpb24gPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5rZXlzUHJlc3NlZC5zcGxpY2Uoa2V5UHJlc3NlZFBvc2l0aW9uLCAxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgYWN0dWFsIHBvc2l0aW9uIGJhc2VkIG9uIGVhcmxpZXIgZXZlbnRzXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5rZXlzUHJlc3NlZC5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXJyb3dsZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy54IC09IHRoaXMuc3BlZWQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnYXJyb3d1cCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMueSAtPSB0aGlzLnNwZWVkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2Fycm93cmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnggKz0gdGhpcy5zcGVlZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdhcnJvd2Rvd24nOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnkgKz0gdGhpcy5zcGVlZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vQ2hlY2tzIHRvIHN0YXkgaW4gYm91bmRzXG4gICAgICAgIGlmICh0aGlzLnggPCAwKSB7XG4gICAgICAgICAgICB0aGlzLnggPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnkgPCAwKSB7XG4gICAgICAgICAgICB0aGlzLnkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnggPiAod2luZG93Lm91dGVyV2lkdGggLSB0aGlzLndpZHRoKSkge1xuICAgICAgICAgICAgdGhpcy54ID0gKHdpbmRvdy5vdXRlcldpZHRoIC0gdGhpcy53aWR0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMueSA+IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IC0gdGhpcy5oZWlnaHQpKSB7XG4gICAgICAgICAgICB0aGlzLnkgPSAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCAtIHRoaXMuaGVpZ2h0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3RoaXMueH1weCwgJHt0aGlzLnl9cHgpYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgcGxheWVyIHdoZW4gYSBibG9jayBnb3QgY2F1Z2h0XG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmxvY2tcbiAgICAgKi9cbiAgICBwdWJsaWMgYmxvY2tDYXVnaHQoYmxvY2s6IEJsb2NrKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3BlZWQgKz0gdGhpcy5zcGVlZEluY3JlYXNlRmFjdG9yO1xuICAgICAgICB0aGlzLndpZHRoICs9IHRoaXMuZ3Jvd3RoRmFjdG9yO1xuICAgICAgICB0aGlzLmhlaWdodCArPSB0aGlzLmdyb3d0aEZhY3RvcjtcblxuICAgICAgICB0aGlzLmVsLnN0eWxlLmhlaWdodCA9IGAke3RoaXMuaGVpZ2h0fXB4YDtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS53aWR0aCA9IGAke3RoaXMud2lkdGh9cHhgO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLmJvcmRlclJhZGl1cyA9IGAke3RoaXMud2lkdGh9cHhgO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGJsb2NrLmNvbG9yO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFuIHVwIVxuICAgICAqL1xuICAgIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZSgpO1xuICAgICAgICBXaW5kb3dFdmVudEhhbmRsZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bi5wbGF5ZXInKTtcbiAgICAgICAgV2luZG93RXZlbnRIYW5kbGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwLnBsYXllcicpO1xuICAgIH1cbn1cbiIsImltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnLmpzb24nO1xuaW1wb3J0IERvbUVsZW1lbnQgZnJvbSBcIi4uL2hlbHBlcnMvZG9tZWxlbWVudFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lciBleHRlbmRzIERvbUVsZW1lbnQge1xuICAgIHNlY29uZHM6IG51bWJlciA9IGNvbmZpZy5nYW1lLnNlY29uZHNQZXJMZXZlbDtcbiAgICBpbnRlcnZhbElkOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoJ3RpbWVyJywgLTEsIC0xLCAnbGV2ZWwnKTtcblxuICAgICAgICB0aGlzLnJlbmRlclRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnbWVzc2FnZScsICdpcy1wcmltYXJ5Jyk7XG4gICAgICAgIHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnNlY29uZHMnKS5pbm5lckhUTUwgPSB0aGlzLnNlY29uZHMudG9TdHJpbmcoKTtcblxuICAgICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLnVwZGF0ZSgpLCAxMDAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3VudGRvd24gb2Ygc2Vjb25kc1xuICAgICAqL1xuICAgIHByaXZhdGUgdXBkYXRlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNlY29uZHMtLTtcbiAgICAgICAgdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuc2Vjb25kcycpLmlubmVySFRNTCA9IHRoaXMuc2Vjb25kcy50b1N0cmluZygpO1xuXG4gICAgICAgIGlmICh0aGlzLnNlY29uZHMgPD0gMykge1xuICAgICAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1wcmltYXJ5Jyk7XG4gICAgICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ2lzLWRhbmdlcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdpcy1wcmltYXJ5Jyk7XG4gICAgICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWRhbmdlcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc2Vjb25kcyA9PT0gMCkge1xuICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCd0aW1lcjpkb25lJykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZW1wbGF0ZSBuZWVkZWQgdG8gc2hvdyBtb3JlIGVsZW1lbnRzXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW5kZXJUZW1wbGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWVzc2FnZS1ib2R5XCI+XG4gICAgICAgICAgICAgICAgPHNwYW4+dGltZTogPC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2Vjb25kc1wiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgIH1cbn1cbiIsImltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnLmpzb24nO1xuaW1wb3J0IERvbUVsZW1lbnQgZnJvbSBcIi4uL2hlbHBlcnMvZG9tZWxlbWVudFwiO1xuaW1wb3J0IEJsb2NrIGZyb20gXCIuL2Jsb2NrXCI7XG5pbXBvcnQgUGxheWVyIGZyb20gXCIuL3BsYXllclwiO1xuaW1wb3J0IFRpbWVyIGZyb20gXCIuL3RpbWVyXCI7XG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4uL2hlbHBlcnMvdXRpbHNcIjtcbmltcG9ydCBXaW5kb3dFdmVudEhhbmRsZXIgZnJvbSBcIi4uL2hlbHBlcnMvd2luZG93ZXZlbnRoYW5kbGVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExldmVsIGV4dGVuZHMgRG9tRWxlbWVudCB7XG4gICAgcHJpdmF0ZSByZWFkb25seSB0b3RhbEJsb2NrczogbnVtYmVyO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgc2NvcmVQZXJCbG9jazogbnVtYmVyO1xuICAgIHByaXZhdGUgYmxvY2tzOiBCbG9ja1tdID0gW107XG4gICAgcHJpdmF0ZSBwbGF5ZXI6IFBsYXllcjtcbiAgICBwcml2YXRlIHRpbWVyOiBUaW1lcjtcbiAgICBwdWJsaWMgZmFpbGVkID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3Rvcih0b3RhbEJsb2NrczogbnVtYmVyLCBzY29yZVBlckJsb2NrOiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoJ2xldmVsJywgMCwgMCk7XG5cbiAgICAgICAgdGhpcy50b3RhbEJsb2NrcyA9IHRvdGFsQmxvY2tzO1xuICAgICAgICB0aGlzLnNjb3JlUGVyQmxvY2sgPSBzY29yZVBlckJsb2NrO1xuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXIoKTtcbiAgICAgICAgdGhpcy50aW1lciA9IG5ldyBUaW1lcigpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50b3RhbEJsb2NrczsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmJsb2Nrcy5wdXNoKG5ldyBCbG9jayhVdGlscy5nZXRSYW5kb21Db2xvcigpLCBVdGlscy5nZXRSYW5kb21JbnQoY29uZmlnLmdhbWUuYmxvY2tTcGVlZC5taW4sIGNvbmZpZy5nYW1lLmJsb2NrU3BlZWQubWF4KSwgVXRpbHMuZ2V0UmFuZG9tSW50KGNvbmZpZy5nYW1lLmJsb2NrUGl4ZWxzLm1pbiwgY29uZmlnLmdhbWUuYmxvY2tQaXhlbHMubWF4KSwgVXRpbHMuZ2V0UmFuZG9tSW50KGNvbmZpZy5nYW1lLmJsb2NrUGl4ZWxzLm1pbiwgY29uZmlnLmdhbWUuYmxvY2tQaXhlbHMubWF4KSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgV2luZG93RXZlbnRIYW5kbGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RpbWVyOmRvbmUnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZhaWxlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3koJ2xldmVsOmZhaWxlZCcpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgZm9yIGNvbGxpc2lvbiBhbmQgcG90ZW50aWFsIHN1Y2Nlc3Mgb2YgdGhpcyBsZXZlbFxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucGxheWVyLnVwZGF0ZSgpO1xuICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKChibG9jaywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGJsb2NrLnVwZGF0ZSgpO1xuXG4gICAgICAgICAgICBpZiAoVXRpbHMuY2hlY2tDb2xsaXNpb24odGhpcy5wbGF5ZXIuZ2V0Q2xpZW50UmVhY3QoKSwgYmxvY2suZ2V0Q2xpZW50UmVhY3QoKSkgJiYgdGhpcy5mYWlsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuYmxvY2tDYXVnaHQoYmxvY2spO1xuICAgICAgICAgICAgICAgIGJsb2NrLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2Nrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnbGV2ZWw6c2NvcmVVcGRhdGUnLCB7ZGV0YWlsOiB7c2NvcmU6IHRoaXMuc2NvcmVQZXJCbG9ja319KSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ibG9ja3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveSgnbGV2ZWw6c3VjY2VzcycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveSBvYmplY3QgJiB0aW1lciBhbmQgdHJpZ2dlciBldmVudCB0byBub3RpZnkgdGhlIHdvcmxkIGFib3V0IHRoZSBzdGF0dXMgb2YgdGhpcyBsZXZlbFxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZVxuICAgICAqL1xuICAgIHByaXZhdGUgZGVzdHJveShldmVudFR5cGU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLnRpbWVyLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5wbGF5ZXIuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKChibG9jaywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGJsb2NrLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH0pO1xuICAgICAgICBXaW5kb3dFdmVudEhhbmRsZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGltZXI6ZG9uZScpO1xuICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoZXZlbnRUeXBlKSk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlKCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IEdhbWUgZnJvbSAnLi9nYW1lJztcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IG5ldyBHYW1lKCkpO1xuIiwiaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZy5qc29uJztcbmltcG9ydCBHVUkgZnJvbSAnLi9ndWkvZ3VpJztcbmltcG9ydCBMZXZlbCBmcm9tIFwiLi9sZXZlbC9sZXZlbFwiO1xuaW1wb3J0IERhdGFTZXJ2aWNlIGZyb20gXCIuL2RhdGFzZXJ2aWNlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWUge1xuICAgIHByaXZhdGUgbGV2ZWwhOiBMZXZlbDtcbiAgICBwcml2YXRlIGxldmVsc1BlckdhbWU6IG51bWJlciA9IGNvbmZpZy5nYW1lLmxldmVsc1BlckdhbWU7XG4gICAgcHJpdmF0ZSBjdXJyZW50TGV2ZWxzUGxheWVkOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgc3RhcnRFbGVtZW50c1BlckxldmVsOiBudW1iZXIgPSBjb25maWcuZ2FtZS5zdGFydEVsZW1lbnRzUGVyTGV2ZWw7XG4gICAgcHJpdmF0ZSBlbGVtZW50c0luY3JlYXNlUGVyTGV2ZWw6IG51bWJlciA9IGNvbmZpZy5nYW1lLmVsZW1lbnRzSW5jcmVhc2VQZXJMZXZlbDtcbiAgICBwcml2YXRlIHNjb3JlUGVyRWxlbWVudDogbnVtYmVyID0gY29uZmlnLmdhbWUuc2NvcmVQZXJFbGVtZW50O1xuICAgIHByaXZhdGUgcmVhZG9ubHkgbWF4U2NvcmU6IG51bWJlcjtcbiAgICBwcml2YXRlIGd1aTogR1VJO1xuICAgIHByaXZhdGUgZGF0YVNlcnZpY2U6IERhdGFTZXJ2aWNlO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZ3VpID0gbmV3IEdVSSgpO1xuICAgICAgICB0aGlzLm1heFNjb3JlID0gdGhpcy5jYWxjdWxhdGVNYXhTY29yZSgpO1xuICAgICAgICB0aGlzLmdhbWVMb29wKCk7XG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UgPSBuZXcgRGF0YVNlcnZpY2UoKTtcblxuICAgICAgICBbJ2xldmVsOnN1Y2Nlc3MnLCAnbGV2ZWw6ZmFpbGVkJ10ubWFwKChldmVudFR5cGUpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgKGUpID0+IHRoaXMudXBkYXRlKGUudHlwZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgWydnYW1lOnN0YXJ0OmNsaWNrJywgJ2xldmVsOnN1Y2Nlc3M6Y2xpY2snLCAnbGV2ZWw6ZmFpbGVkOmNsaWNrJ10ubWFwKChldmVudFR5cGUpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgKCkgPT4gdGhpcy5zdGFydE5ld0xldmVsKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2dhbWU6ZW5kOmNsaWNrJywgKCkgPT4gdGhpcy5yZXN0YXJ0KCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgc2NvcmUgd2l0aCBhdmFpbGFibGUgcGFyYW1ldGVyc1xuICAgICAqXG4gICAgICogQHRvZG8gRG8gSSByZWFsbHkgbmVlZCB0byB0byB0aGlzIHNvIGluZWZmaWNpZW50Li4/XG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBwcml2YXRlIGNhbGN1bGF0ZU1heFNjb3JlKCk6IG51bWJlciB7XG4gICAgICAgIGxldCBtYXhTY29yZSA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZXZlbHNQZXJHYW1lOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBlbGVtZW50cyA9IHRoaXMuc3RhcnRFbGVtZW50c1BlckxldmVsICsgKGkgPT09IDAgPyAwIDogKHRoaXMuZWxlbWVudHNJbmNyZWFzZVBlckxldmVsICogaSkpO1xuICAgICAgICAgICAgbWF4U2NvcmUgKz0gKGVsZW1lbnRzICogdGhpcy5zY29yZVBlckVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXhTY29yZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb25seSBwbGFjZSBmb3IgYSByZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICAgKi9cbiAgICBwcml2YXRlIGdhbWVMb29wKCk6IHZvaWQge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMubGV2ZWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmdhbWVMb29wKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgZ2FtZSBieSBlaXRoZXIgdGhlIGVuZCBvciBhbnl0aGluZyBpbiBiZXR3ZWVuIGxldmVsc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICAgKi9cbiAgICBwcml2YXRlIHVwZGF0ZSh0eXBlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jdXJyZW50TGV2ZWxzUGxheWVkKys7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRMZXZlbHNQbGF5ZWQgPT09IHRoaXMubGV2ZWxzUGVyR2FtZSkge1xuICAgICAgICAgICAgdGhpcy5ndWkuZ2FtZUVuZCh0aGlzLm1heFNjb3JlKTtcbiAgICAgICAgICAgIHRoaXMuc2F2ZVNjb3JlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmd1aS5sZXZlbERvbmUodHlwZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGltZSB0byBzdGFydCBhIG5ldyBsZXZlbCB3aXRoIG1hZG5lc3NcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXJ0TmV3TGV2ZWwoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmxldmVsICYmIHRoaXMubGV2ZWwuZmFpbGVkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydEVsZW1lbnRzUGVyTGV2ZWwgKz0gdGhpcy5lbGVtZW50c0luY3JlYXNlUGVyTGV2ZWw7XG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgdGhpcy5sZXZlbDtcbiAgICAgICAgdGhpcy5ndWkubmV3TGV2ZWwoKTtcblxuICAgICAgICB0aGlzLmxldmVsID0gbmV3IExldmVsKHRoaXMuc3RhcnRFbGVtZW50c1BlckxldmVsLCB0aGlzLnNjb3JlUGVyRWxlbWVudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RhcnQgZXZlcnl0aGluZyBmcm9tIHRoZSBiZWdpbm5pbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlc3RhcnQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ3VpLnJlc3RhcnQoKTtcbiAgICAgICAgdGhpcy5jdXJyZW50TGV2ZWxzUGxheWVkID0gMDtcbiAgICAgICAgdGhpcy5zdGFydEVsZW1lbnRzUGVyTGV2ZWwgPSBjb25maWcuZ2FtZS5zdGFydEVsZW1lbnRzUGVyTGV2ZWw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbCB0aGUgZGF0YSBzZXJ2aWNlIGFuZCBsZXQgaXQgZG8gaXRzIG1hZ2ljXG4gICAgICovXG4gICAgcHJpdmF0ZSBzYXZlU2NvcmUoKTogdm9pZCB7XG4gICAgICAgIGxldCBzY29yZSA9IHRoaXMuZ3VpLmdldFNjb3JlKCk7XG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2Uuc2F2ZVNjb3JlKHNjb3JlKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUmVzcG9uc2UgYWZ0ZXIgc2F2aW5nIHNjb3JlJywgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=